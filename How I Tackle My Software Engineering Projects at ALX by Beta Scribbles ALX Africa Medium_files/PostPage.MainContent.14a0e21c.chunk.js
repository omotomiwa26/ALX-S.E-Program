(self.webpackChunklite=self.webpackChunklite||[]).push([[5531],{9202:(e,n,t)=>{"use strict";t.d(n,{J:()=>i});var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"useShouldShowGiveStaffPickAwardQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"awardByType"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"STAFF_PICK"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}}]}},{kind:"Field",name:{kind:"Name",value:"awardAvailability"}}]}}]}}]}}]}}]}},49205:(e,n,t)=>{"use strict";t.r(n),t.d(n,{MainContent:()=>Aa,useLoader:()=>Ra});var i=t(59713),a=t.n(i),o=t(64718),l=t(67294),r=t(5977),d=t(83447),s=t(94986),c=t(28655),m=t.n(c),u=t(8575),p=t(92471),k=t(90833),v=t(77280),g=t(43487),f=t(78870);function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function h(){var e=m()(["\n  fragment PostCanonicalizer_post on Post {\n    mediumUrl\n  }\n"]);return h=function(){return e},e}(0,p.Ps)(h());var y=["blog.coinbase.com","moody-pub.medium.fail"],E=function(e){var n=e.post.mediumUrl,t=e.matchedPath,i=e.children,a=(0,g.v9)((function(e){return e.navigation.currentHash})),o=(0,v.Wd)("showDomainSetup"),r=(0,v.Wd)("postPublishedType"),s=(0,v.Wd)("responsesOpen"),c=(0,v.PM)(),m=(0,v.G1)(),p=(0,g.v9)((function(e){return e.navigation.host})),S=(0,f.mb)();if(!n||S)return i;var h=u.parse(decodeURIComponent(n)),E=N(N(N(N(N({},c?{source:c}:{}),m?{sk:m}:{}),r?{postPublishedType:r}:{}),o?{showDomainSetup:o}:{}),s?{responsesOpen:s}:{});return p!==h.host?y.indexOf(p)>-1?l.createElement(d.$,null):l.createElement(k.l,{to:(0,f.Rk)(n,E,a),replace:!0,isMediumApp:!0}):h.path&&t!==h.path?l.createElement(k.l,{to:(0,f.Rk)(h.path,E,a),replace:!0}):i},b=t(25735),x=t(25550),F=t(49608),w=function(e,n){return(0,g.v9)((function(t){var i;if(n&&t.meter[n])return null===(i=t.meter[n][e])||void 0===i?void 0:i.shouldShowDismissibleRegwall}))},P=t(319),_=t.n(P),I=t(42423),C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostViewerEdgeContentQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"fullContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}},{kind:"Field",name:{kind:"Name",value:"validatedShareKey"}},{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBody_bodyModel"}}]}}]}}]}}]}}]}}]}}].concat(_()(I.Pk.definitions))},T=function(){var e,n,t,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,d=(0,g.v9)((function(e){return e.navigation.referrer})),s=null!==(e=(0,v.G1)())&&void 0!==e?e:void 0,c=null!==(n=(0,v.PM)())&&void 0!==n?n:void 0,m={referrer:d,sk:s,source:c},u=(0,x.r)(),p=u.viewerId,k=u.loading,f=(0,F.Q)(null!=p?p:""),S=w(a,p),N=(0,b.dd)("enable_dismissible_regwall"),h=N.loading,y=N.value,E=!l;h||!y||k||f||!1!==r||(E=!1!==S);var P=(0,o.a)(C,{variables:{postId:a,postMeteringOptions:m},ssr:!1,skip:!a||E}),_=P.loading,I=P.error,T=P.data,O=null==T||null===(t=T.post)||void 0===t||null===(i=t.viewerEdge)||void 0===i?void 0:i.fullContent;return _?{loading:_}:I?{error:I}:{content:O}},O=t(27517),D=t(61998),R=t(21927),A=t(66411),L=t(75221),B=t(2808),V=t(95989),M=t(50458),U=t(6280),j=t(77355),W=t(96370),H=t(29746),G=function(e){var n=e.isDockingEnabled,t=void 0!==n&&n,i=e.undockedBackgroundColor,a=e.maxWidthSize,o=void 0===a?"inset":a,r=e.children,d=(0,U.$)(t),s=d.dockRef,c=d.markerRef,m=d.isStuck;return l.createElement(l.Fragment,null,l.createElement(j.x,{ref:c}),l.createElement(j.x,{tag:"footer",ref:s,display:"flex",alignItems:"center",boxSizing:"content-box",height:(0,H.a)(52),maxHeight:(0,H.a)(52),zIndex:"1",position:t?{xs:"static",sm:"static",md:"sticky",lg:"sticky",xl:"sticky"}:"static",bottom:t?{xs:void 0,sm:void 0,md:"0",lg:"0",xl:"0"}:void 0,backgroundColor:m?"BACKGROUND":i,borderTop:m?{xs:"NONE",sm:"NONE",md:"BASE_LIGHTER",lg:"BASE_LIGHTER",xl:"BASE_LIGHTER"}:"NONE",marginBottom:{xs:"10px",sm:"10px",md:"26px",lg:"26px",xl:"26px"}},l.createElement(j.x,{flexGrow:"1"},l.createElement(W.P,{size:o},r))))},z=t(32931),Y=t(56804),q=t(3428),Q=t(21232),$=t(21755),K=t(17583),Z=t(10654),X=t(51277),J={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"FloatingPostActions_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"postResponses"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVote_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuButtonWithNegativeSignal_post"}}]}}].concat(_()(Z.x.definitions),_()(X.v.definitions))},ee={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FloatingPostActionsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"FloatingPostActions_post"}}]}}]}}].concat(_()(J.definitions))},ne=t(91743),te=function(e){var n,t,i=e.post,a=l.useContext(Q.f).openSidebar,r=!!(0,b.VB)({name:"enable_follow_list",placeholder:!1}),d=(0,K.s)(),s=!d||d===$.j.xl,c=(0,o.a)(ee,{variables:{postId:i.id},ssr:!1}),m=c.data,u=c.loading,p=c.error;return u?null:(t=p||null==m||!m.post?i:m.post,l.createElement(z.j,{multiVoteButton:l.createElement(Y.S,{post:t,buttonStyle:"SUBTLE_MARGIN",hasDialog:!0,shouldHideClapsText:!0,shouldShowResponsiveLabelText:!0,susiEntry:"clap_footer",buttonColor:"LIGHTER",countScale:"S"}),responsesButton:l.createElement(q.h,{svgSize:"S",responsesCountScale:"S",trackingData:{postId:t.id},responsesCount:(null===(n=t.postResponses)||void 0===n?void 0:n.count)||null,isLimitedState:t.isLimitedState,handleClick:a,countStylesOverride:{marginLeft:"4px"},allowResponses:!0}),menuActionsButton:l.createElement(ne.t,{post:t,iconStyle:"ICON_SUBTLE",hideAddToList:!r,popoverPositioningStrategy:s?"fixed":"absolute",hideOnScroll:!s}),allowResponses:!!t.allowResponses}))},ie=t(8851),ae=t(62367),oe=t(31889),le=t(14804),re=/rgba\(([\d]+),\s*([\d]+),\s*([\d]+),\s*([\d]+|[\d]*.[\d]+)\)/,de=function(e){var n,t,i=e.children,a=e.margin,o=(0,oe.F)();return l.createElement(l.Fragment,null,l.createElement(j.x,{marginTop:"-240px",background:"linear-gradient(".concat((n=o.backgroundColor,t=n.match(re),t?"rgba(".concat(t[1],", ").concat(t[2],", ").concat(t[3],", 0)"):(0,le.l9)(0)),", ").concat(o.backgroundColor,")"),height:"250px",position:"relative",width:"100%"}),l.createElement(j.x,{backgroundColor:"BACKGROUND"},l.createElement(j.x,{margin:"auto",maxWidth:"760px",sm:{margin:null!=a?a:"0 24px 0"}},i)))},se=t(6443),ce=t(43822),me=t(18627),ue=t(90924),pe=function(e){var n=e.postId,t=e.align,i=e.entityId,a=e.id,o=e.buttonStyle,r=void 0===o?"STRONG":o,d=e.onClick,s=(0,se.H)().value,c=(0,me.Av)(),m=(0,g.v9)((function(e){return e.config.authDomain})),u=null==s?void 0:s.hasPastMemberships,p=(0,f.Rk)((0,M.c5p)(m),{subscribeToUserId:i||"",susiEntry:"post_paywall"}),k=l.useCallback((function(){c.event("paywall.upgradeClicked",{postId:n,userId:null==s?void 0:s.id}),null==d||d()}),[n,null==s?void 0:s.id]),v=u?"182px":"104px",S=u?"Resume membership":"Upgrade";return l.createElement(A.cW,{source:{dimension:"post_limit",name:"upgrade_membership",postId:n}},l.createElement(ue.M,null,l.createElement(j.x,{display:"flex",textAlign:"center",justifyContent:"left"===t?"flex-start":"center"},l.createElement(ce.a,{isButton:!0,onClick:k,buttonStyle:r,width:v,redirectUrl:p,id:a},S))))},ke=t(49962),ve=t(14818),ge=t(54945),fe=t(87691),Se=t(14646),Ne=t(92661);function he(){return(he=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var ye=l.createElement("path",{d:"M1 6.25l4 4.5 9-9.5",stroke:"currentColor",strokeWidth:1.5});const Ee=function(e){return l.createElement("svg",he({width:15,height:12,viewBox:"0 0 15 12",fill:"none"},e),ye)};var be=function(e){return{flexShrink:0,marginRight:"12px",marginTop:"4px","& path":{stroke:e.baseColor.fill.normal}}},xe=function(e){var n=e.headerText,t=e.reasonsToUpgrade,i=e.post,a=(0,Se.I)(),o=(0,K.s)(),r="xs"===o||"sm"===o,d=(0,l.useMemo)((function(){var e,n=(null===(e=i.viewerEdge.paywall)||void 0===e?void 0:e.creatorSpotlights)||[];return r&&n.length>6?n.filter((function(e){return!e.hideOnSmallScreen})):n}),[r,i.viewerEdge.paywall]),s=(0,ae.k)(),c=(0,l.useCallback)((function(){null==s||s.flushLocalAttributes()}),[s]),m=!!(0,b.VB)({name:"enable_plan_options_on_paywall",placeholder:!1}),u=(0,Ne.qt)("ShowPay",{}),p=l.useCallback((function(e){if(e){var n=(0,f.Rk)(u,{membershipType:e});window.location.assign(n)}}),[]);return l.createElement(de,{margin:"0 -24px"},l.createElement(j.x,{display:"flex",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},l.createElement(j.x,{display:"flex",flexDirection:"column",padding:"32px",marginTop:"32px",backgroundColor:"BASE_LIGHT",sm:{padding:"28px 33px 32px"},textAlign:"left",borderRadius:"4px",maxWidth:"100%"},l.createElement(ge.H2,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},n),l.createElement(j.x,{margin:"16px 0 32px"},t.map((function(e,n){return l.createElement(j.x,{display:"flex",alignItems:"flex-start",key:"reason-".concat(n),padding:"3px 0"},l.createElement(Ee,{className:a(be)}),l.createElement(fe.F,{scale:"M",key:e,color:"DARKER"},e))}))),l.createElement(j.x,{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},d.map((function(e){return l.createElement(j.x,{key:e.name,display:"flex",alignItems:"center",flexDirection:"column",flexGrow:"1",flexShrink:"1",flexBasis:r?"33%":"25%",marginBottom:"32px","data-testid":"creator-spotlight"},l.createElement(ve.z,{alt:e.name,miroId:e.miroId,diameter:64}),l.createElement(j.x,{marginTop:"8px",textAlign:"center"},l.createElement(fe.F,{scale:r?"S":"M",color:"DARKER"},e.name),l.createElement(fe.F,{scale:"XS"},e.title),e.company&&l.createElement(fe.F,{scale:"XS"},e.company)))}))),m?l.createElement(ke.B,{membershipType:void 0,isTrial:!1,onChange:p,excludeMargin:!0}):l.createElement(pe,{id:"paywallButton-programming",postId:i.id,align:"center",buttonStyle:"STRONG",onClick:c}))))},Fe=t(63038),we=t.n(Fe),Pe=t(32493),_e=t(36405),Ie=t(93717),Ce=t(18839),Te=t(80872);function Oe(){var e=m()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return Oe=function(){return e},e}var De=(0,p.Ps)(Oe()),Re=function(e){var n=e.actionUrl,t=e.children,i=e.onSuccess,a=e.token,o=e.userId,r=(0,me.Av)(),d=!!(0,_e.P5)("skip_sign_in_recaptcha"),s=l.useState(!1),c=we()(s,2),m=c[0],u=c[1],p=(0,g.v9)((function(e){return e.navigation.currentLocation})),k=function(){u(!1)},v=(0,A.pK)(),f=(0,A.hp)(),S=n&&a?(0,Ce.hQ)(p,v,f,n,a):(0,Ce.hQ)(p,v,f),N=(0,x.r)(),h=N.loading,y=N.error,E=N.viewerId;return h||y?null:l.createElement(Pe.m,{mutation:De,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":r.event("site.loginLinkSent",{}),i&&i();break;case"FailedChallenge":r.event("site.loginByEmailCaptchaFailure",{}),u(!1);break;case"BadRequest":case"NotFound":default:k()}},onError:k},(function(e){var n=function(n){(0,Te.Zs)(!0,E,o,"Email",!1);var t="medium";r.event("susi.methodClicked",{entryPoint:f,operation:"login",susiMethod:t.toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:t.toLowerCase(),alternateUserSuggestionTargetUserId:o,alternateUserSuggestionSourceUserId:E}),e({variables:{userId:o,redirect:S,captchaValue:n}})};return l.createElement(l.Fragment,null,!d&&l.createElement(Ie.k,{callback:n,shouldExecuteRecaptcha:m}),t({handleSubmit:function(){return d?n(null):u(!0)}}))}))},Ae=t(69862),Le=t(43705),Be=t(2959),Ve=t(40980),Me=function(e){var n=e.actionUrl,t=e.token,i=e.userSocialLogins,a={actionUrl:n||"",operation:"login",token:t||"",targetUserId:i.userId,alternateUserSuggestion:!0};return l.createElement(Ve.$,{eventData:{operation:a.operation}},i.google?l.createElement(Le.x,a):i.facebook?l.createElement(Ae.q,a):i.twitter?l.createElement(Be.G,a):l.createElement(l.Fragment,null))},Ue=t(93310),je=t(78285);function We(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}var He=function(e){var n=e.declineSuggestedAccount,t=e.isSocial,i=(0,g.v9)((function(e){return e.navigation.hasRenderedAlternateUserBanner})),o=(0,A.hp)(),r=(0,O.I0)(),d=(0,se.H)(),s=d.loading,c=d.error,m=d.value;if(s||c)return l.createElement(l.Fragment,null);var u=function(e){return e?l.createElement(Ue.r,{onClick:function(){return p("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):l.createElement(l.Fragment,null,"Not you?"," ",l.createElement(Ue.r,{onClick:function(){return p("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",l.createElement(Ue.r,{onClick:function(){return p("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},p=function(e){var t="SIGNIN_OPTIONS"===e?"login":"register";n(),r((0,je.Pc)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?We(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):We(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({operation:t,step:e},!!o&&{susiEntry:o})))};return i?u(m):m?l.createElement(Ue.r,{onClick:function(){return n()}},"Not me"):u(t)},Ge=t(75412),ze=t(97171);function Ye(){var e=m()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        __typename\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return Ye=function(){return e},e}function qe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Qe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qe(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var $e=function(e){var n=e.children,t=e.postRenderCallback,i=(0,me.Av)(),a=(0,A.hp)(),o=(0,v.PM)(),r=(0,A.P7)(o||""),d=r.userId,s=r.name,c=l.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{__typename:"UserAvatar",username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),m=we()(c,2),u=m[0],p=m[1];l.useEffect((function(){var e=u.shouldRun,n=u.showSuggestedAccount,i=u.userSocialLogins;e&&(null==t||t(k,n,i))}),[u.shouldRun]);var k=(0,se.H)().value,g=(0,x.r)(),f=g.loading,S=g.error,N=g.viewerId;if(f||S)return null;var h=!("email"!==s||k&&k.mediumMemberAt||!d);return h&&d?l.createElement(Ge.A,{query:Ke,variables:{userId:d}},(function(e){var o=e.loading,l=e.error,r=e.data,d=(r=void 0===r?{}:r).userSocialLogins,s=!(o||l||!d||k&&!d.isMember||!d.facebook&&!d.google&&!d.twitter&&!d.redactedEmailAddress),c=Qe({loading:o,showSuggestedAccount:s},s&&{userSocialLogins:d,declineSuggestedAccount:function(){var e=(0,ze.S)(d);i.event("susi.suggestNotYou",{entryPoint:a,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==d?void 0:d.userId,alternateUserSuggestionSourceUserId:N})}});return!t||o||u.shouldRun||p({shouldRun:!0,showSuggestedAccount:s,userSocialLogins:d}),(null==n?void 0:n(c))||null})):(t&&!u.shouldRun&&p(Qe(Qe({},u),{},{shouldRun:!0})),(null==n?void 0:n({showSuggestedAccount:h,loading:!1}))||null)},Ke=(0,p.Ps)(Ye()),Ze=t(47230),Xe=function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{withHowToPrefix:!0},a=n?(0,ze.J)(n):null;a=a&&a.length<=13?a:null;var o=t?"".concat(a,", read more from ").concat(t," — and everyone else on ").concat(e,"."):"".concat(a,", here's how to read this story — and everything else on ").concat(e,"."),l=i.withHowToPrefix?"How to read":"Read",r=t?"".concat(l," this story from ").concat(t," — and everything else on ").concat(e,"."):"".concat(l," this story — and everything else on ").concat(e,".");return a?o:r},Je=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=(0,O.I0)();return l.createElement(A.cW,{source:{susiEntry:"post_paywall"},extendSource:!0},l.createElement(j.x,{display:"flex",sm:{flexDirection:"column"}},l.createElement(j.x,{display:"flex",flexDirection:"row",justifyContent:"center"},t.facebook||t.google||t.twitter?l.createElement(Me,{userSocialLogins:t}):l.createElement(Re,{onSuccess:function(){return i((0,je.Pc)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:t.userId},(function(e){var n=e.handleSubmit;return l.createElement(Ze.z,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:n},"Send login link")})))),n&&l.createElement(j.x,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},l.createElement(fe.F,{scale:"M"},l.createElement(He,{declineSuggestedAccount:n,isSocial:!!t&&!!(t.facebook||t.google||t.twitter)}))))},en=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=e.suggestedAccountEventData,a=e.showSuggestedAccount,o=e.postId;return l.createElement(A.cW,{source:{dimension:"post_limit_suggestion",name:"upgrade_membership",postId:o}},l.createElement(ue.M,{eventData:i},l.createElement(j.x,{display:"inline-block",textAlign:"center"},l.createElement(Je,{declineSuggestedAccount:n,showSuggestedAccount:a,userSocialLogins:t}),l.createElement(j.x,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},l.createElement(fe.F,{scale:"L"},l.createElement(ce.a,{eventData:i,linkStyle:"OBVIOUS"},"Learn more about membership"))))))},nn=function(e){var n=e.post,t=e.excludePadding,i=void 0!==t&&t,a=(0,g.v9)((function(e){return e.config.productName})),o=(0,se.H)().value,r=(0,x.r)().viewerId,d=n.creator&&n.creator.id,s=(0,b.VB)({name:"enable_members_only_audio",placeholder:!1}),c=(0,K.s)(),m="xs"===c||"sm"===c,u=(0,Ne.qt)("ShowPay",{}),p=l.useCallback((function(e){if(e){var n=(0,f.Rk)(u,{membershipType:e});window.location.assign(n)}}),[]),k=!!(0,b.VB)({name:"enable_plan_options_on_paywall",placeholder:!1});return l.createElement(de,{margin:"0 -24px"},l.createElement($e,null,(function(e){var t,c=e.loading,u=e.showSuggestedAccount,v=e.declineSuggestedAccount,g=e.userSocialLogins;if(c)return l.createElement(l.Fragment,null);u&&(t={alternateUserSuggestionShown:u,alternateUserSuggestionAccountType:(0,ze.S)(g),alternateUserSuggestionTargetUserId:!!g&&g.userId,alternateUserSuggestionSourceUserId:r});var f=k?"0px":"8px";return l.createElement(j.x,{display:"flex",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},l.createElement(j.x,{display:"flex",flexDirection:"column",padding:i?"48px 0 0":"32px",sm:{padding:k?"24px":"28px 16px 32px",textAlign:"center"},backgroundColor:k?"BASE_LIGHT":"NONE"},l.createElement(ge.H2,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},u?"Switch to your member account for unlimited reading.":l.createElement(j.x,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},Xe(a,o&&o.name,n.creator&&n.creator.name))),l.createElement(fe.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER",tag:"div"},!u&&l.createElement(l.Fragment,null,l.createElement(j.x,{marginTop:"16px",marginBottom:"32px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},s?"You’ve read all your free member-only stories. Become a member for\n                unlimited access to every story on ".concat(a," and to support the\n                voices you want to hear more from. As a member, you can also listen to\n                stories anytime, anywhere."):"You’ve read all your free member-only stories, become a member to get unlimited access. Your membership fee supports the voices you want to hear more from."),k?l.createElement(ke.B,{membershipType:void 0,isTrial:!1,onChange:p,excludeMargin:!0}):l.createElement(pe,{postId:n.id,align:m?"center":"left",entityId:d})),l.createElement(j.x,{marginTop:u?"28px":f,marginBottom:k?"0px":"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:u?"inline-block":"none"}},function(e,n,t){if(n.showSuggestedAccount&&e){var i=e.isMember,a=e.redactedEmailAddress;return l.createElement(l.Fragment,null,"Looks like you're coming from the ",i&&"member ","account"," ",l.createElement("b",null,a)," but you’re signed in as ",l.createElement("b",null,null==t?void 0:t.email),". Switch to your",i?" member account for unlimited access":" account",".")}return null}(g,{showSuggestedAccount:u},o))),!!u&&g&&l.createElement(en,{declineSuggestedAccount:v,userSocialLogins:g,suggestedAccountEventData:t,showSuggestedAccount:u,postId:n.id})))})))},tn=function(e){var n,t=e.post,i=(0,g.v9)((function(e){return e.config.productName})),a=(0,se.H)().value,o=Xe(i,null==a?void 0:a.name,null===(n=t.creator)||void 0===n?void 0:n.name,{withHowToPrefix:!1});return l.createElement(xe,{headerText:o,reasonsToUpgrade:["Dive deeper into the topics that matter to you","Get in-depth articles answering thousands of questions","Achieve your personal and professional goals"],post:t})},an=function(e){switch(e){case"javascript":return"JavaScript";case"ios-development":return"iOS development";case"android-development":return"Android development";default:return e.replace("-"," ").toLowerCase()}},on=function(e){var n,t=e.post,i=(0,g.v9)((function(e){return e.config.productName})),a=(0,se.H)().value,o=null===(n=t.primaryTopic)||void 0===n?void 0:n.slug,r=function(e){var n=e?an(e):"technical";return["Become an expert in your areas of interest","Get in-depth articles answering thousands of ".concat(n," questions"),"Grow your career or build a new one"]}(o),d=function(e,n,t){var i=n?(0,ze.J)(n):null;if(i=i&&i.length<=13?i:null,t){var a=an(t);return i?"".concat(i,", get unlimited access to ").concat(a," stories from industry leaders on ").concat(e,"."):"Get unlimited access to ".concat(a," stories from industry leaders on ").concat(e,".")}return i?"".concat(i,", get unlimited access to stories from industry leaders on ").concat(e,"."):"Get unlimited access to stories from industry leaders on ".concat(e,".")}(i,null==a?void 0:a.name,o);return l.createElement(xe,{headerText:d,reasonsToUpgrade:r,post:t})},ln=function(e){var n,t=e.post,i=e.excludePadding,a=void 0!==i&&i,o=(0,se.H)().value,r=(0,me.Av)(),d=(0,b.VB)({name:"enable_aspirational_paywall",placeholder:!1}),s=null===(n=t.viewerEdge.paywall)||void 0===n?void 0:n.type,c=s===L.zB.ASPIRATIONAL;(0,l.useEffect)((function(){r.event("paywall.viewed",{userId:null==o?void 0:o.id}),r.event("experiment.eligible",{experimentId:"7cf742aaa3c8"})}),[]),(0,l.useEffect)((function(){c&&r.event("experiment.eligible",{experimentId:"4dbca4ebaca8"})}),[c]);var m=l.createElement(nn,{post:t,excludePadding:a});switch(s){case L.zB.PROGRAMMING:return l.createElement(on,{post:t});case L.zB.ASPIRATIONAL:return d?l.createElement(tn,{post:t}):m;default:return m}},rn=t(33916),dn=t(26350),sn=t(28451),cn=t(9935),mn=t(54935),un=t(32442),pn=function(e){var n=e.meterCount,t=e.postId,i=e.susiEntry,a="register",o={meterCount:n,operation:a,postId:t},r=(0,mn.j)().openModal;return l.createElement(j.x,{display:"flex",flexDirection:"column",textAlign:"center",margin:"62px 0 52px",sm:{flexDirection:"column",margin:"40px 0"}},l.createElement(Ve.$,{eventData:o},l.createElement(Le.x,{operation:a})),l.createElement(j.x,{marginTop:"10px",sm:{marginTop:"12px"}},l.createElement(Ve.$,{eventData:o},l.createElement(Ae.q,{operation:a}))),l.createElement(j.x,{marginTop:"10px",sm:{marginTop:"12px"}},l.createElement(Ve.$,{eventData:o},l.createElement(un.R,{goToEmailAuthStep:function(){r({step:"ENTER_EMAIL",susiEntry:i,operation:a})},operation:a}))))},kn="post_regwall",vn=function(e){var n=e.meteringInfo,t=e.post,i=e.onDismiss,a=(0,me.Av)(),o="LOCKED_POST_SOURCE_SYNDICATED"===t.lockedSource,r=(0,g.v9)((function(e){return e.config.productName})),d=null==n?void 0:n.postIds.length,s=(0,x.r)().viewerId,c=w(t.id,s),m=(0,g.v9)((function(e){return e.navigation.susiEmail}));(0,l.useEffect)((function(){a.event("meter.viewed",{meterCount:d,postId:t.id,uiType:o?sn.j.SyndicatedRegwall:sn.j.RegWall})}),[]),(0,l.useEffect)((function(){if(d&&c)switch(d){case 2:a.event("dismissible.regwall2.viewed",{postId:t.id});break;case 3:a.event("dismissible.regwall3.viewed",{postId:t.id})}}),[d,c,t.id]);var u=(0,l.useCallback)((function(){i(),a.event("regwall.dismissed",{postId:t.id})}),[i,t.id]);return l.createElement(A.cW,{source:{postId:t.id,susiEntry:kn}},l.createElement(de,null,l.createElement(j.x,{display:"flex",textAlign:"center",justifyContent:"center",sm:{textAlign:"center"},flexDirection:"column"},c&&l.createElement(j.x,{display:"flex",justifyContent:"flex-end",position:"relative"},l.createElement(cn.P,{size:"LARGE",onClick:u})),l.createElement(j.x,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},l.createElement(ge.H2,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},m?"Check your inbox.":l.createElement(l.Fragment,null,l.createElement(j.x,{display:"none",sm:{display:"block"}},c?"Sign up for ".concat(r):"To keep reading this story, get the free app or log in."),l.createElement(j.x,{display:"block",sm:{display:"none"}},c?"Sign up for ".concat(r):"Read the rest of this story with a free account."))),l.createElement(fe.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},tag:"div"},m?l.createElement(l.Fragment,null,l.createElement(j.x,{paddingTop:"12px",paddingBottom:"56px"},"Click the link we sent to ",m," to complete your account setup and continue reading this story."),l.createElement(fe.F,{color:"LIGHTER",scale:"M"},"Didn't get the link?"," ",l.createElement(dn.R,{linkStyle:"OBVIOUS",operation:"register",post:t,susiEntry:kn},"Try again"))):l.createElement(l.Fragment,null,c&&l.createElement(j.x,{paddingTop:"32px"},"With a free account you can discover more writing you'll love."),l.createElement(j.x,{display:"none",sm:{display:"block"}},l.createElement(j.x,{margin:"42px 0"},l.createElement(rn.a,{isButton:!0,postId:t.id,appEntry:"regwall",copy:"Read in app"})),l.createElement(j.x,{marginBottom:"-20px"},"Or, continue in mobile web")),l.createElement(pn,{meterCount:null==n?void 0:n.postIds.length,postId:t.id,susiEntry:kn}),"Already have an account?"," ",l.createElement(dn.R,{linkStyle:"OBVIOUS",operation:"login",post:t,susiEntry:kn},"Sign in")))))))},gn=function(e){var n=e.post,t=e.meteringInfo,i=e.excludePadding,a=n.id,o=n.content.isLockedPreviewOnly,r=(0,me.Av)(),d=(0,x.r)(),s=d.viewerId,c=d.loading,m=(0,O.I0)(),u=(0,F.Q)(null!=s?s:""),p=null==t?void 0:t.postIds,k=!(null==p||!p.includes(n.id)),v=1===(null==p?void 0:p.length),g=T(a,o,v).loading;(0,l.useEffect)((function(){u||!k||v||r.event("experiment.eligible",{experimentId:"18a77ab36d12"})}),[u,k,v]);var f=(0,l.useCallback)((function(){s&&((0,D.S)(n.id,s),m((0,R.I)({postId:n.id,userId:s||"",shouldShow:!1})))}),[D.S,n.id,m,R.I,s]);if(!g&&o&&t){if(u)return l.createElement(ln,{post:n,excludePadding:i});if(!c)return l.createElement(vn,{post:n,meteringInfo:t,onDismiss:f})}return null},fn=t(21919);function Sn(){var e=m()(["\n  mutation AddCollaboratorMutation($postId: ID!) {\n    addCollaborator(postId: $postId)\n  }\n"]);return Sn=function(){return e},e}function Nn(){var e=m()(["\n  fragment AddCollaborator_post on Post {\n    isPublished\n    id\n  }\n"]);return Nn=function(){return e},e}(0,p.Ps)(Nn());var hn=(0,p.Ps)(Sn()),yn=t(99272),En=t(93022),bn=t(70405),xn=t(82492),Fn=t.n(xn),wn=t(68254),Pn=t.n(wn),_n=t(20512),In=t(46696),Cn=t(15085),Tn=t(68216);function On(){var e=m()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    seoTitle\n    mediumUrl\n    creator {\n      name\n      username\n      ...userUrl_user\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalWidth\n      originalHeight\n    }\n    isLocked\n    firstPublishedAt\n    updatedAt\n    isShortform\n    shortformType\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n"]);return On=function(){return e},e}function Dn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Rn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Dn(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var An=(0,O.$j)((function(e){var n=e.config,t=n.productName,i=n.defaultImages,a=n.collectionStructuredData,o=e.navigation;return{currentLocation:o.currentLocation,host:o.host,productName:t,defaultImages:i,collectionStructuredData:a}}))((function(e){var n=e.currentLocation,t=e.host,i=e.post,a=e.postDescription,o=e.productName,r=e.defaultImages,d=e.collectionStructuredData,s=i.collection,c=i.creator,m=i.id,u=i.mediumUrl,p=i.isLocked,k=i.previewImage,v=i.firstPublishedAt,g=i.updatedAt,S=(0,Cn._t)(i,o),N={id:r.postLogo.imageId,originalWidth:r.postLogo.width,originalHeight:r.postLogo.height},h={id:r.orgLogo.imageId,originalWidth:r.orgLogo.width,originalHeight:r.orgLogo.height},y=s?{"@type":"Organization",name:s.name,url:s.domain||(0,f.l1)(t,(0,M.WGd)(s,n)),logo:function(e){if(!e||!e.logo||!e.logo.id)return(0,_n.lc)(h);var n=(0,_n.lc)(e.logo);return n&&60===n.height&&n.width<=600?n:(0,_n.lc)(h)}(s)}:{"@type":"Organization",name:o,url:(0,f.l1)(t,"/"),logo:(0,_n.lc)(h)};s&&d&&d[s.id]&&Fn()(y,d[s.id].data);var E=k&&k.id?(0,_n.Y4)(Rn(Rn({},k),{},{miroId:k.id,croppedWidth:1200})):(0,_n.NJ)({url:(0,In.W6)({miroId:N.id,width:N.originalWidth}),height:N.originalHeight,width:N.originalWidth}),b=a||"",x=p?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},F=Rn({"@type":"NewsArticle",image:E,url:u,dateCreated:v&&new Date(v).toISOString(),datePublished:v&&new Date(v).toISOString(),dateModified:g&&new Date(g).toISOString(),headline:S,name:S,description:b,identifier:m,author:c&&c.name&&c.username?{"@type":"Person",name:c.name||c.username,url:(0,M.AWr)(c,t)}:null,creator:c&&[c.name],publisher:y,mainEntityOfPage:u},x),w=Rn(Rn({},{"@context":"http://schema.org"}),F);return l.createElement(bn.ql,null,l.createElement("script",{type:"application/ld+json"},Pn()(w,{isJSON:!0})))})),Ln=((0,p.Ps)(On(),Cn.bq,Tn.$m),t(21372)),Bn=t(22680);function Vn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Mn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Vn(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Un=(0,O.$j)((function(e){return{authDomain:e.config.authDomain,host:e.navigation.host,productName:e.config.productName}}))((function(e){var n,t,i,a,o=e.authDomain,r=e.productName,d=e.post,s=d.canonicalUrl,c=d.collection,m=d.creator,u=d.id,p=d.latestPublishedAt,k=d.mediumUrl,v=d.previewContent,g=d.socialTitle,f=d.socialDek,S=d.visibility,N=d.isShortform,h="UNLISTED"===S,y=!d.firstPublishedAt,E=null==m?void 0:m.name,b=(0,Cn.yB)(d),x=d.title||"",F=b.latestTitle||x;if(N){var w=Mn(Mn({},d),{},{title:F});i=(0,Cn.oS)(w,r,b.hasTitleGraf).trim(),a=(0,Bn.O)(d,b.hasTitleGraf)}else i=(0,Cn._t)(d,r,b,!0).trim(),a=(0,Bn.j)(d);var P,_,I,C=f||(null==v?void 0:v.subtitle)||a;if(null!=d&&null!==(n=d.previewImage)&&void 0!==n&&n.id&&!d.isLimitedState){var T=d.previewImage;P=(0,In.vz)({miroId:T.id,aspectRatio:1.9,croppedWidth:T.originalWidth?Math.min(T.originalWidth,1200):1200,originalWidth:T.originalWidth,originalHeight:T.originalHeight,focusPercentX:T.focusPercentX,focusPercentY:T.focusPercentY}),d.previewImage.alt&&(_=d.previewImage.alt)}else if(d.isLimitedState){var O={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};P=(0,In.vz)({miroId:O.id,aspectRatio:1.9,croppedWidth:O.originalWidth?Math.min(O.originalWidth,1200):1200,originalWidth:O.originalWidth,originalHeight:O.originalHeight,focusPercentX:O.focusPercentX,focusPercentY:O.focusPercentY}),_="This image was reported as a potential violation of Medium's rules and is under investigation."}null!=m&&m.username&&(I=(0,M.AWr)(m,o));var D=(0,M.CK_)(u),R=!(null!==(t=(0,Cn.c_)(d))&&void 0!==t&&t.shouldIndexPost),A=p&&new Date(p).toISOString(),L=(0,Ln.Vd)(d.readingTime||0),B=null==m?void 0:m.twitterScreenName,V=(null==c?void 0:c.twitterUsername)||"Medium",U=null==c?void 0:c.facebookPageId,j=g||x||F;d.isLimitedState&&(j="");var W=d.isLimitedState?"":C,H=(0,l.useMemo)((function(){var e;return l.createElement(bn.ql,null,l.createElement("meta",{property:"og:type",content:"article"}),A&&l.createElement("meta",{property:"article:published_time",content:A}),l.createElement("title",null,i),l.createElement("meta",{name:"title",content:i}),l.createElement("meta",{property:"og:title",content:j}),U&&l.createElement("meta",{property:"fb:pages",content:U}),l.createElement("meta",{property:"al:android:url",content:D}),l.createElement("meta",{property:"al:ios:url",content:D}),l.createElement("meta",{property:"al:android:app_name",content:"Medium"}),a&&l.createElement("meta",{name:"description",content:a}),C&&l.createElement("meta",{property:"og:description",content:W}),l.createElement("meta",{property:"og:url",content:null!=k?k:void 0}),l.createElement("meta",{property:"al:web:url",content:null!=k?k:void 0}),P&&l.createElement("meta",{property:"og:image",content:P}),_&&l.createElement("meta",{property:"og:image:alt",content:_}),I&&l.createElement("meta",{property:"article:author",content:I}),I&&l.createElement("link",{rel:"author",href:I}),E&&l.createElement("meta",{name:"author",content:E}),l.createElement("link",{rel:"canonical",href:null!==(e=s||k)&&void 0!==e?e:void 0}),l.createElement("link",{rel:"alternate",href:(0,M.zix)((0,M.o2w)("medium.com",d.id))}),l.createElement("meta",{name:"robots",content:"".concat(R?"noindex":"index",",follow,max-image-preview:large")}),l.createElement("meta",{name:"referrer",content:h||y?"origin":"unsafe-url"}),l.createElement("meta",{property:"twitter:title",content:j}),l.createElement("meta",{name:"twitter:site",content:"@".concat(V)}),l.createElement("meta",{name:"twitter:app:url:iphone",content:D}),C&&l.createElement("meta",{property:"twitter:description",content:W}),P&&l.createElement("meta",{name:"twitter:image:src",content:P}),_&&l.createElement("meta",{name:"twitter:image:alt",content:_}),l.createElement("meta",{name:"twitter:card",content:P?"summary_large_image":"summary"}),B&&l.createElement("meta",{name:"twitter:creator",content:"@".concat(B)}),l.createElement("meta",{name:"twitter:label1",content:"Reading time"}),l.createElement("meta",{name:"twitter:data1",content:"".concat(L," min read")}),l.createElement("meta",{name:"twitter:tile:template:testing",content:"2"}),P&&l.createElement("meta",{name:"twitter:tile:image",content:P}),_&&l.createElement("meta",{name:"twitter:tile:image:alt",content:_}),l.createElement("meta",{name:"twitter:tile:info1:icon",content:"Person"}),E&&l.createElement("meta",{name:"twitter:tile:info1:text",content:E}),l.createElement("meta",{name:"twitter:tile:info2:icon",content:"Calendar"}),p&&l.createElement("meta",{name:"twitter:tile:info2:text",content:(0,En.Z)(p,"LLL d, yyyy")}),l.createElement("meta",{name:"twitter:cta",content:"Read on Medium"}))}),[i,s,k,P,_,u,g,a,I,E,B,D,R,p,A]);return l.createElement(l.Fragment,null,H,l.createElement(An,{post:d,postDescription:a}))})),jn=t(7834),Wn=t(67927),Hn=t(72885),Gn=t(30020),zn=t(53690),Yn=t(78271),qn=t(50344),Qn=t(8969),$n=t(45957),Kn=function(e){return{fill:e.baseColor.fill.lighter}};function Zn(e){switch(e){case"PUBLIC_DOMAIN":return"Except where otherwise noted, this work is in the public domain.";case"CC_40_ZERO":return"Except where otherwise noted, this work has been dedicated to the public domain using CC0.";default:return"Except where otherwise noted, this work is licensed under a ".concat(Jn(e,"title")," license by the author.")}}var Xn={PUBLIC_DOMAIN:{title:"Public Domain",link:"https://creativecommons.org/publicdomain/mark/1.0/"},CC_40_ZERO:{title:"Creative Commons copyright waiver",link:"http://creativecommons.org/publicdomain/zero/1.0/"},CC_40_BY:{title:"Creative Commons Attribution 4.0 International",link:"http://creativecommons.org/licenses/by/4.0/"},CC_40_BY_ND:{title:"Creative Commons Attribution-NoDerivatives 4.0 International",link:"https://creativecommons.org/licenses/by-nd/4.0/"},CC_40_BY_SA:{title:"Creative Commons Attribution-ShareAlike 4.0 International",link:"https://creativecommons.org/licenses/by-sa/4.0/"},CC_40_BY_NC:{title:"Creative Commons Attribution-NonCommercial 4.0 International",link:"https://creativecommons.org/licenses/by-nc/4.0/"},CC_40_BY_NC_ND:{title:"Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International",link:"https://creativecommons.org/licenses/by-nc-nd/4.0/"},CC_40_BY_NC_SA:{title:"Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International",link:"https://creativecommons.org/licenses/by-nc-sa/4.0/"}};function Jn(e,n){return Xn[e][n]}var et=function(e){var n=e.license,t=(0,Se.I)();return n?l.createElement(j.x,{display:"inline"},l.createElement(j.x,{display:"inline-block"},l.createElement(fe.F,{scale:"M"},l.createElement(Gn._,{tooltipText:Zn(n),maxWidth:300},l.createElement(Ue.r,{disableSourceParam:!0,href:Jn(n,"link"),linkStyle:"SUBTLE",inline:!0,target:"_blank"},function(e){switch(e){case"PUBLIC_DOMAIN":return"Public domain.";case"CC_40_ZERO":return"No rights reserved";default:return"Some rights reserved"}}(n))))),l.createElement(j.x,{display:"inline-block"},l.createElement(fe.F,{scale:"M"},"CC_40_ZERO"===n&&l.createElement("span",null," by the author."),l.createElement("span",{className:t(Kn),style:{marginLeft:"5px",verticalAlign:"text-bottom"}},function(e){return{CC_40_ZERO:l.createElement($n.Z,null),CC_40_BY:l.createElement(zn.Z,null),CC_40_BY_ND:l.createElement(l.Fragment,null,l.createElement(zn.Z,null),l.createElement(qn.Z,null)),CC_40_BY_SA:l.createElement(l.Fragment,null,l.createElement(zn.Z,null),l.createElement(Qn.Z,null)),CC_40_BY_NC:l.createElement(l.Fragment,null,l.createElement(zn.Z,null),l.createElement(Yn.Z,null)),CC_40_BY_NC_ND:l.createElement(l.Fragment,null,l.createElement(zn.Z,null),l.createElement(Yn.Z,null),l.createElement(qn.Z,null)),CC_40_BY_NC_SA:l.createElement(l.Fragment,null,l.createElement(zn.Z,null),l.createElement(Yn.Z,null),l.createElement(Qn.Z,null)),PUBLIC_DOMAIN:l.createElement(l.Fragment,null)}[e]}(n))))):null},nt=t(73279),tt=t(42440),it=function(e){var n=e.post,t=e.marginBottom,i=(null==n?void 0:n.tags)||[];return i.length?l.createElement(j.x,{display:"flex",flexWrap:"wrap","align-items":"flex-start",marginTop:"6px",marginBottom:t},i.map((function(e){return l.createElement(j.x,{display:"flex",marginTop:"8px",key:e.id},l.createElement(Hn.P,{topic:e}))}))):null},at=function(){return l.createElement(j.x,{padding:"0 8px",display:"inline"},l.createElement(nt.O,{display:"inline",scale:"M"}))},ot=function(e){var n,t=e.post,i=t.visibility,a=t.license,o="UNLISTED"===i,r=!(!a||"ALL_RIGHTS_RESERVED"===a),d=!(null===(n=t.tags)||void 0===n||!n.length),s=o||r;return d||s?l.createElement(W.P,{size:"app"},l.createElement(it,{post:t,marginBottom:s?"40px":"26px"}),s&&l.createElement(j.x,{marginTop:d?"0px":"12px",marginBottom:"26px"},o&&l.createElement(j.x,{display:"inline"},l.createElement(fe.F,{scale:"M",tag:"span"},l.createElement(tt.Z,null)," Unlisted")),o&&r&&l.createElement(at,null),r&&l.createElement(et,{license:a}))):null},lt=t(60672),rt=t(67701);function dt(){var e=m()(["\n  query TopicViewerEdge($topicId: ID!) {\n    topic(id: $topicId) {\n      ... on Topic {\n        id\n        viewerEdge {\n          id\n          isFollowing\n        }\n      }\n    }\n  }\n"]);return dt=function(){return e},e}var st,ct,mt=(0,p.Ps)(dt()),ut=t(75880),pt=t(87757),kt=t.n(pt),vt=t(48926),gt=t.n(vt),ft=t(28959),St="post-view",Nt="post-read",ht="topic-view",yt="medium-search",Et="external-search",bt=(st={},a()(st,St,200),a()(st,Nt,200),a()(st,ht,200),a()(st,yt,200),a()(st,Et,200),st),xt=(ct={},a()(ct,St,new ft.Z("pv")),a()(ct,Nt,new ft.Z("pr")),a()(ct,ht,new ft.Z("tv")),a()(ct,yt,new ft.Z("ms")),a()(ct,Et,new ft.Z("es")),ct),Ft=function(e,n,t){var i=xt[e];i.getCount()===bt[e]&&i.clean();try{i.set(n,t)}catch(e){i.clean()}},wt=t(62896),Pt=function(){var e=gt()(kt().mark((function e(){return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{_t((function(n){e(n)}))}catch(e){n(e)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function _t(e){var n="Unknown";function t(t){e({isPrivate:t,browserName:n})}function i(){void 0!==Promise?navigator.webkitTemporaryStorage.queryUsageAndQuota((function(e,n){var i;t(n<(void 0!==(i=window).performance&&void 0!==i.performance.memory&&void 0!==i.performance.memory.jsHeapSizeLimit?performance.memory.jsHeapSizeLimit:1073741824))}),(function(e){throw new Error("detectIncognito somehow failed to query storage quota: "+e.message)})):(0,window.webkitRequestFileSystem)(0,1,(function(){t(!1)}),(function(){t(!0)}))}!function(){var e=navigator.userAgent,a=navigator.vendor;try{if((0,wt.G6)(e))!function(){var e,i,a=window;if(void 0!==navigator.maxTouchPoints)if(void 0!==a.safari&&void 0===a.DeviceMotionEvent)n="Safari for macOS",function(){try{window.safari.pushNotification.requestPermission("https://example.com","private",{},(function(){}))}catch(e){return t(!new RegExp("gesture").test(e))}t(!1)}();else{if(void 0===a.DeviceMotionEvent)throw new Error("detectIncognito Could not identify this version of Safari");n="Safari for iOS",e=!1,(i=document.createElement("iframe")).style.display="none",document.body.appendChild(i),i&&i.contentWindow&&i.contentWindow.applicationCache.addEventListener("error",(function(){return e=!0,t(!0)})),setTimeout((function(){e||t(!1)}),100)}else!function(){var e=window.openDatabase,n=window.localStorage;try{e(null,null,null,null)}catch(e){return t(!0)}try{n.setItem("test","1"),n.removeItem("test")}catch(e){return t(!0)}t(!1)}()}();else if((0,wt.i7)(a))n=function(){var e=navigator.userAgent;return e.match(/Chrome/)?e.match(/Edg/)?"Edge":void 0!==navigator.brave?"Brave":void 0!==navigator.opr?"Opera":"Chrome":"Chromium"}(),i();else if((0,wt.vU)(e))n="Firefox",t(void 0===navigator.serviceWorker);else{if(void 0===navigator.msSaveBlob)throw new Error("detectIncognito cannot determine the browser");n="Internet Explorer",t(void 0===window.indexedDB)}}catch(e){return n="Unknown",t(!1)}}()}var It=t(54878),Ct=t(98482),Tt=t(84052),Ot=t(91583),Dt=t(66227),Rt=t(73917),At=t(20113);function Lt(){return(Lt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var Bt=l.createElement("path",{fill:"#fff",d:"M0 0h49v57H0z"}),Vt=l.createElement("path",{d:"M45.95 17.53v-.04l-.05-1.55a5.32 5.32 0 0 0-5.04-5.17c-5.8-.32-10.3-2.2-14.13-5.89l-.03-.03a3.26 3.26 0 0 0-4.4 0l-.03.03c-3.84 3.7-8.33 5.57-14.13 5.89-2.79.15-5 2.42-5.04 5.18l-.05 1.54v.1c-.11 5.84-.25 13.12 2.21 19.73 1.36 3.63 3.41 6.79 6.1 9.38 3.07 2.96 7.09 5.3 11.94 6.98a3.74 3.74 0 0 0 2.4 0c4.85-1.68 8.86-4.03 11.93-6.98 2.69-2.6 4.74-5.76 6.1-9.39 2.47-6.63 2.33-13.92 2.22-19.78zm-5 18.77c-2.6 6.96-7.9 11.74-16.23 14.62a.67.67 0 0 1-.45 0c-8.32-2.87-13.63-7.65-16.23-14.61-2.27-6.1-2.14-12.78-2.03-18.67v-.03c.03-.5.04-1.04.05-1.62.02-1.22 1-2.23 2.24-2.3 3.29-.18 6.17-.81 8.83-1.92 2.64-1.1 5-2.67 7.19-4.77.1-.1.25-.1.36 0a23.11 23.11 0 0 0 7.2 4.77 26.27 26.27 0 0 0 8.82 1.92 2.36 2.36 0 0 1 2.24 2.3c0 .58.02 1.12.05 1.62.11 5.9.24 12.59-2.04 18.69z",fill:"#757575"}),Mt=l.createElement("path",{d:"M24.5 17.76c-7.11 0-12.9 5.4-12.9 12.04 0 6.64 5.79 12.04 12.9 12.04s12.9-5.4 12.9-12.04c0-6.64-5.79-12.04-12.9-12.04zm0 21.25c-5.44 0-9.86-4.13-9.86-9.2 0-5.08 4.42-9.21 9.86-9.21 5.44 0 9.86 4.13 9.86 9.2 0 5.08-4.42 9.2-9.86 9.2z",fill:"#757575"}),Ut=l.createElement("path",{d:"M28.08 25.1l-5.64 6.12-1.53-1.66c-.56-.6-1.46-.6-2.02 0-.55.6-.55 1.59 0 2.2l2.54 2.75c.28.3.65.45 1.01.45.37 0 .73-.15 1.01-.45l6.65-7.22c.55-.6.55-1.59 0-2.2-.56-.6-1.47-.6-2.02 0z",fill:"#757575"});const jt=function(e){return l.createElement("svg",Lt({width:49,height:57,viewBox:"0 0 49 57",fill:"none"},e),Bt,Vt,Mt,Ut)};var Wt=(0,O.$j)()((function(e){var n=e.dispatch,t=e.isVisible,i=e.hide,a="limitedStateInterstitialDialogPopover";return l.createElement(Ot.V,{isVisible:t,hide:i,withCloseButton:!1,customBackgroundColor:"rgba(255, 255, 255, 0.94)"},l.createElement(j.x,{display:"flex",justifyContent:"center",paddingTop:"100px"},l.createElement(j.x,{height:"550px",width:"900px",background:le.ix,borderRadius:"4px",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",boxShadow:"0 2px 10px ".concat((0,le.Uy)(.15)),paddingBottom:"14px",md:{width:"600px",height:"auto",padding:"14px 8px"},sm:{width:"95vw !important",padding:"14px 8px"}},l.createElement(j.x,{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%"},l.createElement(j.x,{paddingBottom:"24px"},l.createElement(jt,null)),l.createElement(j.x,{paddingBottom:"24px",paddingRight:"24px",paddingLeft:"24px"},l.createElement(At.X6,{scale:"L"},"The following content was reported as a potential violation of Medium’s rules and is under investigation.")),l.createElement(j.x,{padding:"0 0 24px 0"},l.createElement(Ze.z,{buttonStyle:"BRAND",size:"REGULAR",onClick:function(){i(),n((0,je.Dx)({duration:"FOREVER",toastStyle:"LIMITED_STATE_BANNER"}))}},"I understand and want to proceed anyway"),l.createElement(Dt.B,null,(function(e){var n=e.isVisible,t=e.toggle,i=e.hide;return l.createElement(Rt.J,{ariaId:a,isVisible:n,hide:i,display:"block",customZIndex:800,popoverRenderFn:function(){return l.createElement(j.x,{padding:"15px 20px",width:"400px"},l.createElement(fe.F,{scale:"S"},"Anyone can publish on Medium, provided the content adheres to Medium’s rules and policies. When Medium is made aware of potential violations, the content is manually evaluated and appropriate action taken. Some features may be disabled while the content is under review."))},placement:"top",targetDistance:15},l.createElement(j.x,{paddingTop:"10px"},l.createElement(Ue.r,{"aria-controls":a,"aria-expanded":n?"true":"false",onClick:t},l.createElement("u",null,l.createElement(fe.F,{scale:"S"},"Why am I seeing this?")))))})))),l.createElement(j.x,{display:"flex",justifyContent:"center"},l.createElement(fe.F,{scale:"M"},"View our"," ",l.createElement(Ue.r,{href:"https://medium.com/policy/medium-rules-30e5502c4eb4",linkStyle:"OBVIOUS",inline:!0},"Rules,")," ",l.createElement(Ue.r,{href:"https://medium.com/policy/medium-terms-of-service-9db0094a1e0f",linkStyle:"OBVIOUS",inline:!0},"Terms of Service")," ","&"," ",l.createElement(Ue.r,{href:"https://medium.com/policy/medium-partner-program-terms-fcfe9cf777b8",linkStyle:"OBVIOUS",inline:!0},"Partner Program Terms"))))))}));function Ht(){var e=m()(["\n  fragment LimitedStateInterstitial_post on Post {\n    creator {\n      id\n    }\n    isLimitedState\n  }\n"]);return Ht=function(){return e},e}var Gt=function(e){return function(){return{filter:e?"blur(10px)":"blur(0)"}}};function zt(e){var n=e.post,t=n.creator,i=n.isLimitedState,a=e.children,o=(0,se.H)().value,r=null==o?void 0:o.id,d=(0,Se.I)(),s=l.useState(!1),c=we()(s,2),m=c[0],u=c[1];return l.useEffect((function(){u(!0)}),[]),i&&(t&&t.id)!==r?l.createElement(Dt.B,{initialVisibility:!0},(function(e){var n=e.isVisible,t=e.hide;return l.createElement(l.Fragment,null,l.createElement("div",{className:d(Gt(n))},a),m&&l.createElement(Wt,{isVisible:n,hide:t}))})):a}(0,p.Ps)(Ht());var Yt=t(66018),qt=t(93537),Qt=t(98223),$t=function(){var e=(0,O.I0)(),n=(0,je.w)(),t=(0,l.useState)("loading"),i=we()(t,2),a=i[0],o=i[1],r=(0,l.useCallback)((function(t,i,a){o(i?"rendered":"not_eligible"),i&&(e((0,qt.T)(!0)),n({toastStyle:"ALTERNATE_USER",duration:"FOREVER",extraParams:{userSocialLogins:a}}))}),[n]);return(0,l.useEffect)((function(){e((0,Qt.e)(!0))}),[]),(0,l.useEffect)((function(){"not_eligible"===a&&e((0,Qt.e)(!1))}),[a]),l.createElement($e,{postRenderCallback:r})},Kt=t(87498),Zt=t(18634),Xt=t(68821),Jt=t(34135),ei=t(84509);var ni=t(67154),ti=t.n(ni),ii={xs:"XS",sm:"XS",md:"S",lg:"S",xl:"S"},ai=function(e){var n=e.children,t=(0,oe.F)(),i=(0,l.useState)(!1),a=we()(i,2),o=a[0],r=a[1],d=o?2:1,s=function(){window.innerWidth<=t.breakpoints.sm&&r(!0)};return(0,l.useEffect)((function(){return s(),Jt.V6.on("resize",s),function(){return Jt.V6.off("resize",s)}}),[]),l.createElement(At.X6,{scale:ii,clamp:d},n)},oi=t(82405),li=t(19308),ri=t(6177),di=t(43220),si=t(24330),ci=t(32317),mi=t(69116),ui=t(13454),pi=t(18733),ki=t(98096),vi=t(68894),gi=t(3207),fi=function(e){var n=e.buttonSize,t=e.targetUserId,i=(0,vi.O)(!1),a=we()(i,3),o=a[0],r=a[1],d=a[2],s=(0,oe.F)(),c=(0,pi.Uo)().baseTheme,m=(0,gi.q3)(s,c),u=(0,se.H)().value;return u?l.createElement(ki.f,{theme:m},l.createElement(ui.E,{targetUserId:t,viewerId:u&&u.id},(function(e){var t=e.mutate;return l.createElement(Ze.z,{buttonStyle:o?"SUBTLE":"ERROR",onClick:t,size:n||"REGULAR",onMouseEnter:r,onMouseLeave:d},o?"Unblock":"Blocked")}))):null},Si=t(8431);function Ni(){var e=m()(["\n  fragment PostFooterBylineAurora_post on Post {\n    id\n    creator {\n      name\n      username\n      bio\n      id\n      ...UserFollowButton_user\n      ...auroraHooks_publisher\n      ...userUrl_user\n      ...UserSubscribeButton_user\n    }\n    collection {\n      name\n      description\n      ...CollectionFollowButton_collection\n      ...collectionUrl_collection\n    }\n    ...UserFollowButton_post\n    ...CollectionFollowButton_post\n    ...useShowAuthorNewsletterV3Promo_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Ni=function(){return e},e}var hi="follow_footer",yi=function(e){var n=e.post,t=e.maxWidthSize,i=void 0===t?"inset":t,a=n.creator,o=n.collection,r=(0,g.v9)((function(e){return e.config.authDomain})),d=(0,g.v9)((function(e){return e.navigation.currentLocation})),s=(0,se.H)().value,c=(0,oe.F)(),m=(0,ut.Pd)(a).viewerEdge,u=l.useState(0),p=we()(u,2),k=p[0],v=p[1],f=k<=c.breakpoints.sm,S=function(){v(window.innerWidth)};l.useEffect((function(){return S(),Jt.V6.on("resize",S),function(){return Jt.V6.off("resize",S)}}),[]);var N="REGULAR",h=(null==s?void 0:s.id)===(null==a?void 0:a.id)||f?void 0:"168px",y={display:"flex",justifyContent:"space-between",alignItems:"center"},E=(0,di.KW)(n.creator),b=o?(0,M.WGd)(o,d,r):a?(0,M.AWr)(a,r):"",x="More from ".concat(o?o.name:null==a?void 0:a.name),F=o?o.description:null==a?void 0:a.bio,w=null;a&&(w=s&&null!=m&&m.isBlocking?l.createElement(fi,{buttonSize:N,targetUserId:a.id}):l.createElement(j.x,{display:"flex",marginLeft:"8px"},l.createElement(si.N,{creator:a,followButtonSize:N,post:n,susiEntry:hi})));var P=o?l.createElement(oi.F,{buttonSize:N,collection:o,post:n,susiEntry:hi}):w;return l.createElement(j.x,{print:{display:"none"}},(null==a?void 0:a.name)&&(null==a?void 0:a.username)&&!E&&l.createElement(j.x,{paddingBottom:"30px"},l.createElement(W.P,{size:i},l.createElement(j.x,ti()({},y,{borderTop:"BASE_LIGHTER",paddingTop:"33px"}),l.createElement(j.x,null,l.createElement(Si.Lh,{scale:"S"},"Written by"),l.createElement(ai,null,l.createElement(Ue.r,{href:(0,M.AWr)(a,r)},a.name||a.username))),w),a.bio&&l.createElement(j.x,{paddingTop:"6px",paddingRight:h},l.createElement(fe.F,{scale:"M"},a.bio)))),(o||E)&&l.createElement(j.x,{paddingTop:"32px",paddingBottom:"4px",backgroundColor:"BASE_LIGHT"},l.createElement(W.P,{size:i},l.createElement(j.x,y,l.createElement(ai,null,l.createElement(Ue.r,{href:b},x)),P),F&&l.createElement(j.x,{paddingTop:"5px",paddingRight:h,wordBreak:"break-word"},l.createElement(fe.F,{scale:"M"},F)))))};function Ei(){var e=m()(["\n  fragment PostFooterCollectionButton_collection on Collection {\n    id\n    name\n    ...collectionUrl_collection\n  }\n  ","\n"]);return Ei=function(){return e},e}(0,p.Ps)(Ni(),li.I,li.b,Tn.nf,ci.S$,ci.sj,di.C5,Tn.$m,ri.b,mi.w);var bi=function(e){var n=e.collection,t=(0,g.v9)((function(e){return e.config.authDomain})),i=(0,g.v9)((function(e){return e.navigation.currentLocation}));return l.createElement(l.Fragment,null,(null==n?void 0:n.name)&&l.createElement(j.x,{maxWidth:"100%",textAlign:"center"},l.createElement(Ze.z,{buttonStyle:"STRONG",href:(0,M.WGd)(n,i,t)},"Read more from ",n.name)))},xi=((0,p.Ps)(Ei(),Tn.nf),t(68356)),Fi=t.n(xi),wi=t(50742),Pi=Fi()({loading:function(){return null},loader:function(){return Promise.all([t.e(6078),t.e(3193)]).then(t.bind(t,54894))},modules:["./PostNextFiveStories"],webpack:function(){return[54894]},render:(0,wi.n)("PostNextFiveStories")}),_i=function(e){var n=e.post,t=e.rootMargin,i=e.target,a=l.useState(!1),o=we()(a,2),r=o[0],d=o[1];return r?l.createElement(Pi,{post:n,target:i,rootMargin:t}):(Jt.V6.on("load",(function(){return d(!0)})),null)},Ii=t(54712),Ci=t(57189),Ti=t(47459),Oi=t(43158),Di=t(18305);function Ri(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Ai(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ri(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ri(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Li=function(e){var n=e.posts,t=e.sourceName,i=(0,oe.F)(),a=Fn()({},Ai(Ai({},i),{grid:{columnWidth:i.grid.columnWidth,gutterSteps:{xs:6,sm:16,md:16,lg:16,xl:16},gutterWidth:i.grid.gutterWidth,marginSteps:{xs:6,sm:32,md:32,lg:32,xl:32},xStep:i.grid.xStep,xlMaxContentWidth:i.grid.xlMaxContentWidth,yStep:i.grid.yStep}}));return l.createElement(j.x,{playwrightClassName:"pw-more-medium-articles",tag:"section"},l.createElement(j.x,{paddingBottom:"26px"},l.createElement(ai,null,"Recommended from Medium")),l.createElement(ki.f,{theme:a},l.createElement(Ti.T,{alignItems:"flex-start"},n.map((function(e,n){return l.createElement(Oi.P,{key:e.id,size:{xs:12,sm:6,md:6,lg:6,xl:6}},l.createElement(A.cW,{source:{name:t,index:n}},l.createElement(Di.o,{post:e,presentationContext:"POST_PREVIEW"},l.createElement(j.x,{paddingBottom:"8px"},l.createElement(Ci.N,{post:e,withFixedWidth:!1})))))})))))},Bi=function(e){var n,t=e.post,i=e.sourceName,a=(null==t||null===(n=t.internalLinks)||void 0===n?void 0:n.items)||[];return a.length?l.createElement(Li,{posts:a,sourceName:i}):null},Vi=function(e){var n,t,i,a,o,r,d,s=e.post,c=e.target,m=l.useRef(null),u=s.collection,p=s.responseRootPost,k=(t=(0,Ii.xg)(),i=(0,g.v9)((function(e){return e.client.hydrated})),a=(0,g.p9)((function(e){return e.session.isLoggedInCookie})),o=(0,se.H)().value,r=a||!!o,d=(0,g.p9)((function(e){return e.session.isSpoofed})),!i&&t||!r&&!d);return l.createElement(j.x,{ref:m},l.createElement(j.x,{backgroundColor:"BASE_LIGHT",print:{display:"none"}},l.createElement(yi,{post:s,maxWidthSize:"app"}),l.createElement(j.x,{paddingTop:"25px"},l.createElement(_i,{post:s,target:c||m}),u&&l.createElement(j.x,{paddingBottom:"96px",paddingTop:"40px"},l.createElement(bi,{collection:u}))),k&&!(null==p||null===(n=p.post)||void 0===n||!n.id)&&l.createElement(W.P,{size:"app"},l.createElement(j.x,{paddingTop:"40px",paddingBottom:"80px"},l.createElement(Bi,{post:s,sourceName:"post_internal_links"})))))},Mi=t(29969),Ui=t(1951),ji=t(40922),Wi=function(e){var n=e.post,t=n.id,i=n.collection,a=n.creator,o=(0,ji._)(i),r=(0,Ui.g)(n);return i&&o?l.createElement(j.x,{marginBottom:"40px"},l.createElement(Mi.X,{postId:t,publisher:i})):a&&r.value?l.createElement(j.x,{marginBottom:"40px"},l.createElement(Mi.X,{postId:t,publisher:a})):null},Hi=t(87079),Gi=t(22836),zi=Fi()({loading:function(){return null},loader:function(){return Promise.all([t.e(957),t.e(3158)]).then(t.bind(t,69788))},modules:["./PostGiveStaffPickAward"],webpack:function(){return[69788]},render:(0,wi.n)("PostGiveStaffPickAward")}),Yi=Fi()({loading:function(){return null},loader:function(){return t.e(8934).then(t.bind(t,1641))},modules:["./PostStaffPickAwardHeader"],webpack:function(){return[1641]},render:(0,wi.n)("PostStaffPickAwardHeader")}),qi=t(9202),Qi=Fi()({loading:function(){return null},loader:function(){return t.e(5313).then(t.bind(t,24590))},modules:["./PostGiveTipOnExternalPlatform"],webpack:function(){return[24590]},render:(0,wi.n)("PostGiveTipOnExternalPlatform")}),$i=function(e){var n,t,i,a,r,d,s=e.post,c=e.meteringInfo,m=l.useRef(null),u=s.isLocked,p=s.collection,k=s.creator,f=s.content.isLockedPreviewOnly,S=p||k,N=(0,se.H)().value,h=!!N,y=(p||{}).googleAnalyticsId,E=y?[y]:null;(0,ie.t)({ids:E}),(0,Xt.V)(m,s),function(e,n,t){var i=(0,me.Av)(),a=(0,A.pK)(),o=(0,l.useState)(!1),r=we()(o,2),d=r[0],s=r[1],c=(0,O.I0)(),m=(0,ae.k)();(0,l.useEffect)((function(){if(!d&&t){var o=function(){if(n.current&&!d){var o,l=(0,ei.L6)(n.current),r=(0,ei.tM)(l),u=r.top+r.height,p=(0,ei.tM)((0,ei.t_)()),k=p.top+p.height;if(!t.content.isLockedPreviewOnly&&k>=u-100&&a.includes("post_page")){s(!0),c((0,je.C2)(!0));var v={source:a,postId:t.id,collectionSlug:t.collection?t.collection.slug:"",sequenceId:t.sequence?t.sequence.sequenceId:""};i.event("post.clientRead",v),m&&(m.setLocalAttribute("latest.post.clientRead.url",window.location.href),v.postId&&m.setLocalAttribute("latest.post.clientRead.postId",v.postId),v.source&&m.setLocalAttribute("latest.post.clientRead.source",v.source)),e||(o=t.id,Ft(Nt,o,Date.now()))}}};return Jt.V6.on("scroll_end",o),function(){Jt.V6.off("scroll_end",o)}}}),[d,t,m]),(0,l.useEffect)((function(){return function(){c((0,je.C2)(!1))}}),[])}(h,m,s),function(e){var n=(0,se.H)().value,t=(0,fn.D)(hn,{variables:{postId:e.id}}),i=we()(t,2),a=i[0],o=i[1].called;l.useEffect((function(){e.isPublished||null==n||!n.id||o||a()}),[n])}(s),function(){var e=(0,je.w)(),n=l.useState(!0),t=we()(n,2),i=t[0],a=t[1],o=(0,se.H)().value,r=(0,g.p9)((function(e){return e.session.xsrf})),d=(0,v.PM)(),s=(0,A.P7)(d||"").name;l.useEffect((function(){function e(){return(e=gt()(kt().mark((function e(){var n;return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,Te.vA)(o.id,r);case 4:n=e.sent,a(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[null==o?void 0:o.id,r]),l.useEffect((function(){null!=o&&o.createdAt&&(new Date).getTime()-o.createdAt>5*Kt.uD&&!i&&"login"===s&&(e({toastStyle:"SIGN_IN_CONFIRMATION",duration:"FOREVER"}),a(!0),(0,Te.oy)(o.id,r))}),[o,i,e,s,r])}(),function(e){var n=e.post,t=e.clientViewedContext,i=void 0===t?1:t,a=e.overrideCommonData,r=void 0===a?{}:a;(function(e){var n,t,i=e.post,a=e.meteringInfo,l=(0,g.v9)((function(e){return e.config.authDomain})),r=null==i?void 0:i.id,d=(0,ut.Pd)(null==i?void 0:i.creator),s=d.viewerEdge,c=d.loading,m=(0,rt.gY)(null==i?void 0:i.collection),u=m.viewerEdge,p=m.loading,k=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,o.a)(mt,{variables:{topicId:n},ssr:!1,skip:!n}),i=t.loading,a=t.error,l=t.data;return i?{loading:i}:a?{error:a}:{viewerEdge:null==l||null===(e=l.topic)||void 0===e?void 0:e.viewerEdge}}(null==i||null===(n=i.primaryTopic)||void 0===n?void 0:n.id),v=k.viewerEdge,f=k.loading,S=p||c||f;(0,lt.e)({data:{canonicalUrl:r&&null!=i&&null!==(t=i.collection)&&void 0!==t&&t.domain?(0,M.o2w)(l,r):void 0,creatorViewerEdge:s,collectionViewerEdge:u,meteringInfo:a,post:i||void 0,topicViewerEdge:v},loading:!r||S||!(null!=i&&i.isPublished),show:!0})})({post:n,meteringInfo:e.meteringInfo}),function(e){var n=e.post,t=e.clientViewedContext,i=e.overrideCommonData,a=void 0===i?{}:i,o=(0,me.Av)(),r=(0,x.r)(),d=r.loading,s=r.viewerId,c=(0,g.v9)((function(e){return e.client.viewerIsBot})),m=s&&(0,F.Q)(s),u=(null==n?void 0:n.collection)||{},p=u.id,k=u.slug,v=((null==n?void 0:n.content)||{}).validatedShareKey,f=null==n?void 0:n.id,S=l.useState(!1),N=we()(S,2),h=N[0],y=N[1],E=l.useState(null),b=we()(E,2),w=b[0],P=b[1],_=l.useCallback(gt()(kt().mark((function e(){var n,t,i;return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt();case 2:t=e.sent,i=null!==(n="Unknown"===t.browserName||t.isPrivate)&&void 0!==n?n:null,y(!0),P(i);case 6:case"end":return e.stop()}}),e)}))),[]);l.useEffect((function(){if(!d&&f&&s&&h){if(null!=n&&n.isPublished){m||(n.isLocked?(0,Te.yB)():(0,Te.B8)());var e=(0,Cn.c_)(n),i=e.shouldIndexPost,l=e.indexReason;c&&o.event("post.clientBotCrawled",{postId:f,userId:s,userAgent:navigator.userAgent,lastCrawledAt:Date.now(),isIndexable:i,indexReason:l}),o.event("post.clientViewed",{postId:f,collectionId:p,collectionSlug:k,context:t,isFriendLink:!!v,source:"post_page",isIncognitoMode:w,isTruncated:n.content.isLockedPreviewOnly},a)}else o.event("post.draftViewed",{postId:f});m||function(e){Ft(St,e,Date.now())}(f)}else h||_()}),[f,s,d,w,_])}({post:n,clientViewedContext:i,overrideCommonData:r})}({post:s,meteringInfo:c});var w=u?{className:"meteredContent"}:{},P=(null===(n=s.creator)||void 0===n?void 0:n.name)||(null===(t=s.creator)||void 0===t?void 0:t.username)||"the author",_=null===(i=s.creator)||void 0===i?void 0:i.id,I=!(null==N||!N.id)&&(null==N?void 0:N.id)===_,C=function(e){var n,t=e.postId,i=e.isViewerPostCreator,a=e.isLoggedIn,r=(0,o.a)(qi.J,{variables:{postId:t},ssr:!1,skip:!t||!a||i}),d=r.data,s=r.loading,c=null==d||null===(n=d.post)||void 0===n?void 0:n.viewerEdge,m=!(null==c||!c.awardAvailability.includes(L.w2.STAFF_PICK)),u=!(null==c||!c.awardByType);return{showGiveStaffPickAward:l.useMemo((function(){return!s&&!!c&&(u||m)}),[c,s]),viewerHasAwarded:u,showGiveStaffPickAwardLoading:s}}({postId:s.id,isViewerPostCreator:I,isLoggedIn:h}),T=C.showGiveStaffPickAward,D=C.viewerHasAwarded,R=C.showGiveStaffPickAwardLoading,B=l.useMemo((function(){return!R&&!T&&!f&&S}),[R,T,f,S]),V=s.countToShowAwardBadge.totalCount>0,U=(0,b.VB)({name:"can_send_tips_v0",placeholder:!1})&&!!_,H=!!(0,b.VB)({name:"enable_plan_options_on_paywall",placeholder:!1});return l.createElement(j.x,null,l.createElement(Ct.k,{post:s},l.createElement(Un,{post:s}),l.createElement($t,null),l.createElement(Yt.Lv,{post:s,user:k,forceLoad:(null==N?void 0:N.id)===(null==k?void 0:k.id)}),p&&l.createElement(Gi.l,{collection:p,post:s}),l.createElement(j.x,{marginBottom:{xs:"52px",sm:"52px",md:"68px",lg:"68px",xl:"68px"}},l.createElement(W.P,{size:"app"},l.createElement("article",w,l.createElement(j.x,null,l.createElement(yn.m,{post:s,meteringInfo:c}),l.createElement(zt,{post:s},l.createElement(j.x,null,k&&s&&l.createElement(Hi.O,{creator:k,post:s,postBodyRef:m,isLockedPreviewOnly:!!s.content.isLockedPreviewOnly,showInResponseToEntityPreview:!0,showStar:!!s.isLocked,viewerId:null==N?void 0:N.id,playwrightClassName:"pw-post-byline-header"}),V&&l.createElement(Yi,{postId:s.id}),l.createElement(jn.b,{isAuroraPostPageEnabled:!0,post:s,ref:m,richTextStyle:"INLINE"}))))),l.createElement(gn,{post:s,meteringInfo:c,excludePadding:!H}))),!f&&l.createElement(ot,{post:s}),l.createElement(G,{isDockingEnabled:!1,undockedBackgroundColor:"BACKGROUND",maxWidthSize:"app"},l.createElement(Wn.F,{post:s,useSocialPopover:!0,shouldHideClapsText:!0})),l.createElement(te,{post:s}),U&&l.createElement(Qi,{creatorName:P,creatorId:_,postId:s.id}),B&&l.createElement(W.P,{size:"app"},l.createElement(Wi,{post:s})),T&&l.createElement(zi,{creator:{imageId:null===(a=s.creator)||void 0===a?void 0:a.imageId,name:(null===(r=s.creator)||void 0===r?void 0:r.name)||(null===(d=s.creator)||void 0===d?void 0:d.username)||"the author"},postId:s.id,viewer:{imageId:null==N?void 0:N.imageId,name:(null==N?void 0:N.name)||(null==N?void 0:N.username)||"you",id:null==N?void 0:N.id},viewerHasAwarded:D}),l.createElement(It.G8,{customStyleSheet:s.customStyleSheet},l.createElement(Vi,{post:s,target:m}))),!h&&l.createElement(Zt.y,{xs:!0,sm:!0,md:!0,lg:!0},l.createElement(Tt.Q,null)))},Ki=t(27628),Zi=t(69973),Xi=t(56912),Ji=t(55193),ea=t(66862),na=t(75865),ta=t(75990),ia={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterPromo_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_publisher_Collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useShowCollectionNewsletterV3Promo_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_publisher_User"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_post"}}]}}]}}].concat(_()(na.kD.definitions),_()(ta.P.definitions),_()(na.WZ.definitions),_()(ri.b.definitions))},aa=t(4966),oa=t(95538),la=t(12182),ra={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedResponsesSidebarContent_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"postResponses"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedReplies_post"}}]}}].concat(_()(la.e9.definitions))},da={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ThreadedResponsesSidebar_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedResponsesSidebarContent_post"}}]}}].concat(_()(ra.definitions))},sa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"WithResponsesSidebar_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ThreadedResponsesSidebar_post"}}]}}].concat(_()(da.definitions))},ca=t(31228),ma=t(4088),ua=t(28096),pa=t(41190),ka=t(32934),va={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostJsonLd_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"logo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"updatedAt"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(_()(Tn.$m.definitions),_()(ka.bq.definitions))},ga=t(97849),fa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostMetadata_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"socialTitle"}},{kind:"Field",name:{kind:"Name",value:"socialDek"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"Field",name:{kind:"Name",value:"canonicalUrl"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"latestPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"Field",name:{kind:"Name",value:"readingTime"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"twitterScreenName"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"twitterUsername"}},{kind:"Field",name:{kind:"Name",value:"facebookPageId"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"alt"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}}]}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostJsonLd_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"postMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shouldIndexPost_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostTitle_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleDetails_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(_()(Tn.$m.definitions),_()(va.definitions),_()(ga.i.definitions),_()(ga.m.definitions),_()(ka.HF.definitions),_()(ka.Pz.definitions),_()(ka.dm.definitions),_()(ka.bq.definitions))},Sa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostFooterCollectionButton_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}}].concat(_()(Tn.nf.definitions))},Na=t(78693),ha=t(93647),ya=t(71069),Ea={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostFooterBylineAurora_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"bio"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserSubscribeButton_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionFollowButton_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionFollowButton_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_post"}}]}}].concat(_()(Na.s.definitions),_()(ha.C.definitions),_()(Tn.$m.definitions),_()(ya.w.definitions),_()(li.I.definitions),_()(Tn.nf.definitions),_()(Na.S.definitions),_()(li.b.definitions),_()(ri.b.definitions))},ba=t(97576),xa=t(15013),Fa=t(9273),wa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"LORecirc_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPresentationTracker_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ReadNextPostCard_post"}}]}}].concat(_()(xa.h.definitions),_()(Fa.Q.definitions))},Pa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"InternalLinks_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"internalLinks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"8"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"LORecirc_post"}}]}}]}}]}}]}}].concat(_()(wa.definitions))},_a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Footer_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostFooterCollectionButton_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"responseRootPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostFooterBylineAurora_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostNextFiveStories_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"InternalLinks_post"}}]}}].concat(_()(Sa.definitions),_()(Ea.definitions),_()(ba.Y.definitions),_()(Pa.definitions))},Ia={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostFooterInfo_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"license"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostFooterTags_post"}}]}}].concat(_()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostFooterTags_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"tags"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"displayTitle"}},{kind:"Field",name:{kind:"Name",value:"normalizedTagSlug"}}]}}]}}]))},Ca={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostPageQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"awardType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AwardType"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postResult"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostResultError_postResult"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"canonicalUrl"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"googleAnalyticsId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostCollectionHeader_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PublisherHeader_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}},{kind:"Field",name:{kind:"Name",value:"validatedShareKey"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PublisherHeader_publisher"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SuspendedBannerLoader_user"}}]}},{kind:"Field",name:{kind:"Name",value:"customStyleSheet"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CustomThemeProvider_customStyleSheet"}}]}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"license"}},{kind:"Field",name:{kind:"Name",value:"collaborators"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostCollectionHeader_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterPromo_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Wall_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"InteractivePostBody_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"WithResponsesSidebar_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostCanonicalizer_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostFooterActionsBar_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostHeader_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostBylineHeader_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostReadTracker_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostUrl_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"buildBranchViewData_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostMetadata_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SuspendedBannerLoader_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Footer_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuButtonWithNegativeSignal_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostFooterInfo_post"}},{kind:"Field",alias:{kind:"Name",value:"countToShowAwardBadge"},name:{kind:"Name",value:"awards"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"awardType"}}},{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}}]}}]}}]}}].concat(_()(Ki.i.definitions),_()(Zi.P.definitions),_()(Xi.L.definitions),_()(Ji.v.definitions),_()(ea.K.definitions),_()(Zi.Q.definitions),_()(ia.definitions),_()(aa.r.definitions),_()(oa.U.definitions),_()(sa.definitions),_()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostCanonicalizer_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mediumUrl"}}]}}]),_()(ca.R.definitions),_()(ua.Z.definitions),_()(pa.C.definitions),_()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostReadTracker_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sequenceId"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}}]}}]),_()(ma.u.definitions),_()([{kind:"FragmentDefinition",name:{kind:"Name",value:"buildBranchViewData_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"layerCake"}},{kind:"Field",name:{kind:"Name",value:"primaryTopic"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}}]}}]),_()(fa.definitions),_()(Ji.Q.definitions),_()(_a.definitions),_()(X.v.definitions),_()(Ia.definitions))},Ta=t(61280);function Oa(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Da(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Oa(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oa(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ra=function(e){var n,t,i,a,r,d=(0,M.mrd)({params:e})||"",s=(0,Ta.X)({params:e}),c=s.error?[]:null===(n=s.data)||void 0===n?void 0:n.meterPost.postIds,m=null==c?void 0:c.includes(d),u=1===(null==c?void 0:c.length),p=function(e,n,t){var i=(0,x.r)().viewerId,a=(0,F.Q)(null!=i?i:""),o=w(e,i),r=(0,b.dd)("enable_dismissible_regwall"),d=r.loading,s=r.value,c=(0,O.I0)(),m=i&&!a&&!d&&s&&n&&!1===t;return(0,l.useEffect)((function(){t&&(0,D.S)(e,i),m&&void 0===o&&c((0,R.I)({postId:e,userId:i,shouldShow:!t}))}),[e,i,m,o,t,D.S]),!!m}(d,m,u),k=(0,o.a)(Ca,{variables:{postId:d,postMeteringOptions:{forceTruncation:!1},awardType:L.w2.STAFF_PICK},ssr:!1,fetchPolicy:"cache-only"}),v="Post"===(null===(t=k.data)||void 0===t||null===(i=t.postResult)||void 0===i?void 0:i.__typename)&&k.data.postResult.content.isLockedPreviewOnly,g=!!p&&!v,f=(0,o.a)(Ca,{variables:{postId:d,postMeteringOptions:{forceTruncation:g},awardType:L.w2.STAFF_PICK},skip:!d}),S=null===(a=f.data)||void 0===a?void 0:a.postResult,N="Post"===(null==S?void 0:S.__typename)&&!(null==S||null===(r=S.content)||void 0===r||!r.isLockedPreviewOnly),h=T(d,N,u),y=h.content,E=S&&y?Da(Da({},S),{},{content:y}):S;return l.useMemo((function(){return{loading:f.loading||s.loading||!!h.loading,postQueryResult:f,postResult:E,postMeterQueryResult:s}}),[f,s,E,h])},Aa=l.memo((function(e){var n=e.postQueryResult,t=e.postResult,i=e.postMeterQueryResult,a=e.params,o=(0,M.mrd)({params:a})||"",c=n.loading,m=n.error,u=i.error,p=i.data,k=null==p?void 0:p.meterPost,v=(0,r.TH)(),g=l.useMemo((function(){return{name:"post_page",postId:o}}),[o]);return o?c?l.createElement(V.h,null):u||m?l.createElement(B.C,{error:u||m,showMetabar:!1}):(0,s.r)(t)?l.createElement(s.I,{postResult:t,showMetabar:!1}):l.createElement(E,{post:t,matchedPath:v.pathname,key:o},l.createElement(A.cW,{source:g},l.createElement($i,{post:t,meteringInfo:k}))):l.createElement(d.$,null)}))},29969:(e,n,t)=>{"use strict";t.d(n,{X:()=>F});var i=t(63038),a=t.n(i),o=t(67294),l=t(92519),r=t(83302),d=t(25735),s=t(6443),c=t(67701),m=t(77355),u=t(93310),p=t(20113),k=t(87691),v=t(18627),g=t(66411),f=t(14646),S=t(31889),N=t(34135),h=t(97217),y=t(43487),E=t(50458),b=function(e,n){return{borderTop:"1px solid ".concat(e.baseColor.border.darker),padding:"24px 0",marginBottom:"25px",minHeight:n}},x=function(e){var n=e.viewer,t=e.newsletterV3,i=e.newsletterV3LandingUrl,a=e.useCustomDomainLOFlow,d=e.isVertical,s=e.handleClick;return t?n||a?o.createElement(l.x,{newsletterV3:t,buttonStyle:"SUBTLE",redirectUrl:a?i:void 0,isVertical:d}):o.createElement(r.Q,{newsletterV3:t,isVertical:d,handleClick:s}):null},F=function(e){var n,t,i,l,r,F=e.postId,w=e.publisher,P=e.isVertical,_=void 0!==P&&P,I=o.useRef(null),C=(0,y.v9)((function(e){return e.config.authDomain})),T=(0,v.Av)(),O=(0,f.I)(),D=(0,S.F)(),R=(0,s.H)().value,A=!!(0,d.VB)({name:"enable_newsletter_lo_flow_custom_domains",placeholder:!1}),L=o.useState(!1),B=a()(L,2),V=B[0],M=B[1],U=o.useState("0px"),j=a()(U,2),W=j[0],H=j[1],G=null==(0,y.v9)((function(e){return e.navigation.currentLocation})).match("http[s]?://[^/]*".concat(C)),z=!R&&G&&A,Y=w.newsletterV3,q=null==Y?void 0:Y.type,Q=w.username,$=void 0===Q?"":Q,K=(0,E.iBn)(null!==(n=null==Y?void 0:Y.slug)&&void 0!==n?n:"",C,q===h.Rr.NEWSLETTER_TYPE_COLLECTION?w:void 0,q===h.Rr.NEWSLETTER_TYPE_AUTHOR&&$?$:void 0),Z="Collection"===w.__typename?w:void 0,X=(0,c.gY)(Z).viewerEdge;switch(q){case h.Rr.NEWSLETTER_TYPE_COLLECTION:t="Sign up for ".concat(null==Y?void 0:Y.name),i="0px",l="You're an editor of ".concat(null==Y?void 0:Y.name),r=null==X?void 0:X.isEditor;break;case h.Rr.NEWSLETTER_TYPE_AUTHOR:t=(null==Y?void 0:Y.promoHeadline)||"Get an email whenever ".concat(w.name," publishes."),i="6px",l="You cannot subscribe to yourself",r=w.viewerEdge.isUser}V&&(t="Check your inbox.");var J=!1,ee=function(){!J&&ne()&&(T.event("newsletterV3.promoViewed",{newsletterV3Id:null==Y?void 0:Y.id,postId:F}),J=!0)},ne=function(){var e;if(!I.current)return!1;var n=null===(e=I.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};return o.useEffect((function(){return ee(),window&&N.V6.on("scroll",ee),function(){N.V6.off("scroll",ee)}}),[]),o.useEffect((function(){var e;if(I.current){var n=(null===(e=I.current)||void 0===e?void 0:e.getBoundingClientRect()).height;H("".concat(n,"px"))}}),[I]),Y&&o.createElement(g.cW,{source:{name:"newsletter_v3_promo",susiEntry:"newsletter_v3_promo"}},o.createElement("div",{ref:I,className:_?void 0:O(b(D,W))},o.createElement(m.x,{wordBreak:"break-word",paddingBottom:i},o.createElement(p.X6,{scale:"S"},t)),q===h.Rr.NEWSLETTER_TYPE_COLLECTION&&!V&&o.createElement(o.Fragment,null,o.createElement(m.x,{paddingTop:"4px"},o.createElement(k.F,{tag:"h3",scale:"S",color:"DARKER"},"By ".concat(w.name))),o.createElement(m.x,{paddingTop:"8px",paddingBottom:"10px"},o.createElement(k.F,{scale:"S",color:"DARKER"},null==Y?void 0:Y.description," ",o.createElement(u.r,{inline:!0,linkStyle:"OBVIOUS",href:K},"Take a look.")))),q===h.Rr.NEWSLETTER_TYPE_AUTHOR&&(null==Y?void 0:Y.promoBody)&&!V&&o.createElement(o.Fragment,null,o.createElement(m.x,{wordBreak:"break-word",paddingTop:"8px",paddingBottom:"8px"},o.createElement(k.F,{scale:"S",color:"DARKER"},null==Y?void 0:Y.promoBody))),r?o.createElement(m.x,{paddingTop:"10px"},o.createElement(k.F,{scale:"S",color:"DARKER"},l)):o.createElement(m.x,{display:"flex",flexWrap:"wrap"},o.createElement(x,{viewer:R,useCustomDomainLOFlow:z,newsletterV3:Y,newsletterV3LandingUrl:K,isVertical:_,handleClick:function(){return M(!0)}}))))}},41422:(e,n,t)=>{"use strict";t.d(n,{L:()=>r});var i=t(319),a=t.n(i),o=t(95472),l=t(68216),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3SubscribeByEmail_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"collectionDefaultBackgroundTheme_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}}]}}].concat(a()(o.Gi.definitions),a()(l.nf.definitions))}},75865:(e,n,t)=>{"use strict";t.d(n,{WZ:()=>d,kD:()=>s,Rf:()=>c});var i=t(319),a=t.n(i),o=t(13156),l=t(41422),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3Promo_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"promoHeadline"}},{kind:"Field",name:{kind:"Name",value:"promoBody"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3SubscribeButton_newsletterV3"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3SubscribeByEmail_newsletterV3"}}]}}].concat(a()(o.B.definitions),a()(l.L.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3Promo_publisher_User"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isUser"}}]}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_newsletterV3"}}]}}]}}].concat(a()(r.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3Promo_publisher_Collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_newsletterV3"}}]}}]}}].concat(a()(r.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3Promo_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_publisher_User"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3Promo_publisher_Collection"}}]}}]}}].concat(a()(d.definitions),a()(s.definitions))}},6177:(e,n,t)=>{"use strict";t.d(n,{F:()=>a,b:()=>o});var i=t(319),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"showPromo"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]}}]},o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useShowAuthorNewsletterV3Promo_user"}}]}}]}}].concat(t.n(i)()(a.definitions))}},1951:(e,n,t)=>{"use strict";t.d(n,{g:()=>l,t:()=>r});var i=t(67294),a=t(9354),o=t(75880),l=function(e){var n=e.creator,t=r(n);return n?t:{value:!1}},r=function(e){var n,t,l,r=(0,o.Pd)(e),d=r.viewerEdge,s=r.loading,c=i.useRef(null),m=(0,a.T)({newsletterSlug:null==e||null===(n=e.newsletterV3)||void 0===n?void 0:n.slug,username:null==e?void 0:e.username}),u=m.viewerEdge,p=m.loading;return(l=null!==c.current?{value:c.current}:s||p?{loading:!0}:null!=e&&null!==(t=e.newsletterV3)&&void 0!==t&&t.showPromo?{value:!(!(null!=d&&d.isUser||null==u)&&u.isSubscribed)}:{value:!1}).loading||void 0===l.value||null!==c.current||(c.current=l.value),l}},75990:(e,n,t)=>{"use strict";t.d(n,{P:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useShowCollectionNewsletterV3Promo_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"showPromo"}}]}}]}}]}},40922:(e,n,t)=>{"use strict";t.d(n,{_:()=>o});var i=t(67701),a=t(9354),o=function(e){var n=(e||{}).newsletterV3,t=(0,i.gY)(e),o=t.viewerEdge,l=t.loading,r=(0,a.T)({newsletterSlug:null==n?void 0:n.slug,collectionSlug:null==e?void 0:e.slug}),d=r.viewerEdge,s=r.loading;return!(null==n||!n.showPromo||l||s||!(null!=o&&o.isEditor||null==d)&&d.isSubscribed)}},49962:(e,n,t)=>{"use strict";t.d(n,{B:()=>x});var i=t(67294),a=t(66802),o=t(36405),l=t(77355),r=t(47230),d=t(87691),s=t(20113),c=t(18627),m=t(14646),u=t(14804),p=t(87879),k=t(93661),v=function(e,n){return n?{backgroundColor:e.brandColor.sage.light,color:e.accentColor.fill.normal}:void 0},g=function(e,n){return function(t){return{flex:1,display:"flex",flexDirection:"column",alignItems:"center",position:"relative",cursor:"pointer",padding:"24px",minHeight:"146px",boxShadow:"0 0 0 ".concat(e?2:1,"px ").concat(e?t.accentColor.fill.normal:t.baseColor.border.lighter),borderRadius:"3px",":hover":{boxShadow:"0 0 0 2px ".concat(t.accentColor.fill.normal)},":not(:last-child)":{marginRight:{xs:void 0,sm:void 0,md:"24px",lg:"24px",xl:"24px"},marginBottom:{xs:"32px",sm:"32px",md:n?"0px":"24px",lg:n?"0px":"24px",xl:n?"0px":"24px"}},"& button":v(t,e),"& button:hover":v(t,e)}}},f="17px",S={display:"block",position:"relative"},N={position:"absolute",top:0,right:0,left:0,width:f,height:f,margin:0,padding:0,opacity:0,cursor:"inherit",zIndex:1},h=function(){return{position:"absolute",top:"-14px",height:"28px",borderRadius:"4px",backgroundColor:u.ix}},y=function(e){return{backgroundColor:(0,p.bv)(e.accentColor.fill.normal,.15),borderRadius:"4px"}},E={textDecoration:"line-through",marginRight:"5px"},b=function(e){var n=e.onChange,t=e.selected,a=e.membershipType,c=e.label,u=e.price,p=e.term,k=e.isTrial,v=e.savings,f=e.crossoutPrice,b=e.excludeMargin,x=void 0!==b&&b,F=(0,m.I)(),w=(0,i.useCallback)((function(e){return n(e.target.value)}),[n]),P=(0,i.useCallback)((function(){return n(a)}),[n,a]),_=!!(0,o.P5)("enable_annual_plan_badge");return i.createElement("label",{htmlFor:a,className:F(g(t,x))},_&&v&&i.createElement("div",{className:F(h)},i.createElement("div",{className:F(y)},i.createElement(l.x,{display:"flex",alignItems:"center",padding:"3px 16px 5px",borderRadius:"4px"},i.createElement(d.F,{scale:"M",color:"ACCENT"},"SAVE ",v)," "))),i.createElement("div",{className:F(S)},i.createElement("input",{className:F(N),type:"radio",name:"membership-type",required:!0,id:a,value:a,onChange:w,checked:t,"data-testid":"".concat(a,"-radio-button")})),i.createElement(l.x,{flexGrow:"1",textAlign:"center",xs:{display:"flex",width:"100%",justifyContent:"space-between"},sm:{display:"flex",width:"100%",justifyContent:"space-between"}},i.createElement(s.X6,{scale:"S"},c),i.createElement(l.x,{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"24px",marginBottom:"24px",xs:{marginTop:"0",marginBottom:"12px",alignItems:"flex-end"},sm:{marginTop:"0",marginBottom:"12px",alignItems:"flex-end"}},k&&i.createElement(l.x,{marginBottom:"4px"},i.createElement(d.F,{scale:"S",color:"DARKER"},"1 month free, then")),i.createElement(d.F,{scale:"L",color:"DARKER"},f&&i.createElement(d.F,{scale:"L",color:"LIGHTER",tag:"span"},i.createElement("span",{className:F(E)},f)),u,"/",p),!_&&v&&i.createElement(l.x,{marginTop:"4px"},i.createElement(d.F,{scale:"M",color:"ACCENT"},"(save ",v,")")))),i.createElement(r.z,{buttonStyle:"STRONG",width:"100%",size:"LARGE",onClick:P,type:"button"},t?"Selected":"Select"))},x=function(e){var n=e.membershipType,t=e.isTrial,r=e.onChange,d=e.excludeMargin,s=void 0!==d&&d,m=(0,c.Av)(),u=(0,o.P5)("is_medium_staff"),p=(0,k.OS)({membershipType:k.FM.Monthly,isLongFormat:!0}),v=(0,k.OS)({membershipType:k.FM.Yearly,isLongFormat:!0}),g=(0,k.OS)({membershipType:k.FM.YearlyCrossout}),f=(0,k.OS)({membershipType:k.FM.YearlyPriceSaved}),S=(0,k.kr)({membershipType:k.FM.YearlyStaff,country:"US"}),N=(0,k.kr)({membershipType:k.FM.YearlyStaffPriceSaved,country:"US"}),h=(0,i.useCallback)((function(e){r(e),m.event("membershipPaymentPage.planSelected",{planType:e})}),[r,m]);return i.createElement(l.x,{marginTop:s?"0px":"48px",marginBottom:s?"0px":"40px",sm:{marginTop:s?"0px":"24px"},display:"flex",flexDirection:{xs:"column",sm:"column",md:"row",lg:"row",xl:"row"}},u&&i.createElement(b,{label:"Staff",membershipType:k.FM.YearlyStaff,selected:k.FM.YearlyStaff===n,onChange:h,isTrial:t,price:(0,a.xG)({amount:S.amount,currency:S.currency,isLongFormat:!0}),term:"year",savings:(0,a.xG)({amount:N.amount,currency:N.currency,floatingDigits:[0,0]}),excludeMargin:!0}),i.createElement(b,{label:"Monthly",membershipType:k.FM.Monthly,selected:k.FM.Monthly===n,onChange:h,isTrial:t,price:p,term:"month",excludeMargin:!0}),i.createElement(b,{label:"Annual",membershipType:k.FM.Yearly,selected:k.FM.Yearly===n,onChange:h,isTrial:t,price:v,term:"year",savings:f,crossoutPrice:g,excludeMargin:!0}))}},18704:(e,n,t)=>{"use strict";t.d(n,{N:()=>l});var i=t(67294),a=t(87691),o=t(21372);function l(e){var n=e.readingTime,t=e.scale,l=void 0===t?"S":t,r=e.includeRead,d=void 0===r||r,s=e.color,c=e.tag,m=void 0===c?"span":c,u=d?" read":"";return i.createElement(a.F,{scale:l,color:s,tag:m,playwrightClassName:"pw-reading-time"},"".concat((0,o.Vd)(n||0)," min").concat(u))}},97576:(e,n,t)=>{"use strict";t.d(n,{Y:()=>r,l:()=>d});var i=t(319),a=t.n(i),o=t(31718),l=t(89748),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostNextFiveStories_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CardByline_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CardByline_publisher"}}]}}]}}].concat(a()(l.Gk.definitions))},d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostNextFiveStoriesQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"authorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPublication"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"from"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"PaginationLimit"}},defaultValue:{kind:"IntValue",value:"5"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authorRecircFeed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"paging"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"authorId"},value:{kind:"Variable",name:{kind:"Name",value:"authorId"}}},{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}}],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isPublication"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isPublication"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"homepagePostsConnection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"ObjectField",name:{kind:"Name",value:"from"},value:{kind:"Variable",name:{kind:"Name",value:"from"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"posts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}}]}}]}}]}}].concat(a()(o.Cg.definitions))}},14337:(e,n,t)=>{"use strict";t.d(n,{v:()=>r});var i=t(319),a=t.n(i),o=t(84683),l=t(27048),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PublisherAvatar_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}}]}}]}}].concat(a()(o.d.definitions),a()(l.W.definitions))}},66862:(e,n,t)=>{"use strict";t.d(n,{P:()=>l,K:()=>r});var i=t(319),a=t.n(i),o=t(95472),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CustomThemeProvider_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorPalette"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"customDefaultBackgroundTheme_colorPalette"}}]}}]}}]}}].concat(a()(o.L9.definitions))},r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CustomThemeProvider_customStyleSheet"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CustomStyleSheet"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"customDefaultBackgroundTheme_customStyleSheet"}},{kind:"FragmentSpread",name:{kind:"Name",value:"customStyleSheetFontTheme_customStyleSheet"}}]}}].concat(a()(o.Ui.definitions),a()(o.VE.definitions))}},9273:(e,n,t)=>{"use strict";t.d(n,{Q:()=>m});var i=t(319),a=t.n(i),o=t(27048),l=t(68216),r=t(54341),d=t(18821),s=t(4088),c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReadNextPostCard_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserMentionTooltip_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"}}]}}].concat(a()(o.W.definitions),a()(l.$m.definitions),a()(r.O.definitions),a()(d.H.definitions))},m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ReadNextPostCard_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReadNextPostCard_user"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"alt"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostUrl_post"}}]}}].concat(a()(c.definitions),a()(l.nf.definitions),a()(s.u.definitions))}},57189:(e,n,t)=>{"use strict";t.d(n,{N:()=>y});var i=t(67294),a=t(25145),o=t(68427),l=t(84739),r=t(33058),d=t(64238),s=t(12643),c=t(4381),m=t(17193),u=t(28695),p=t(93310),k=t(77355),v=t(26244),g=t(27323),f=t(87691),S=t(52069),N=t(14646),h=t(46696),y=function(e){var n,t,y,E=e.post,b=e.withFixedWidth,x=void 0===b||b,F=E.collection,w=E.creator,P=(0,d.o)(w),_=(0,a.L)(E),I=E&&E.previewImage||{},C=I.focusPercentX,T=I.focusPercentY,O=I.id,D=I.alt,R=null!==(n=null==E?void 0:E.title)&&void 0!==n?n:"",A=null!==(t=null==F?void 0:F.name)&&void 0!==t?t:null,L=(0,o.B)(),B=(0,l.I)();w&&(y=B(w));var V=O?"170px":"".concat(226,"px"),M=(0,N.I)(),U=(0,i.useCallback)((function(){return w&&i.createElement(u.K,{user:w})}),[w]);return i.createElement(k.x,{display:"flex",flexDirection:"column",justifyContent:"center",marginBottom:"24px"},i.createElement(k.x,{display:"flex",flexDirection:"row",justifyContent:"space-between"},i.createElement(k.x,{display:"flex",flexDirection:"column",marginRight:"24px",flexGrow:"1",flexBasis:"0%"},w&&i.createElement(k.x,{display:"flex",alignItems:"center",marginBottom:"8px"},i.createElement(k.x,{marginRight:"8px"},i.createElement(p.r,{href:y},i.createElement(m.Yt,{scale:"XXXS",user:w}))),i.createElement(k.x,{paddingRight:"4px",display:"flex",alignItems:"center"},i.createElement(v.$,{targetDistance:15,mouseLeaveDelay:100,placement:"top",role:"tooltip",popoverRenderFn:U},i.createElement(p.r,{href:y},i.createElement(f.F,{scale:"S",color:"DARKER",clamp:1},w.name))),P&&i.createElement(r.G,{marginLeft:"2px",marginBottom:"2px",size:"S",userId:w.id})),F&&F.name&&i.createElement(i.Fragment,null,i.createElement(k.x,{paddingRight:"4px"},i.createElement(f.F,{scale:"S",color:"LIGHTER"},"in")),i.createElement(k.x,null,i.createElement(p.r,{href:L(F)},i.createElement(f.F,{scale:"S",color:"DARKER",clamp:1},A))))),R&&i.createElement(g.P,{href:_},i.createElement(S.Dx,{scale:"XS",clamp:3},i.createElement("div",{className:x?M({width:V}):void 0},R)))),i.createElement(g.P,{href:_},i.createElement(k.x,{width:"56px"},O&&i.createElement(s.G,{height:1,width:1},i.createElement(c.UV,{miroId:O,alt:D||"",aspectRatio:c.Pr.Square,strategy:h._S.Crop,width:56,rules:{borderRadius:"2px"},focusPercentX:C||50,focusPercentY:T||50,freezeGifs:!0}))))))}},98482:(e,n,t)=>{"use strict";t.d(n,{k:()=>D});var i=t(63038),a=t.n(i),o=t(67294),l=t(6722),r=t(43242),d=t(80745),s=t(28655),c=t.n(s),m=t(87757),u=t.n(m),p=t(6479),k=t.n(p),v=t(48926),g=t.n(v),f=t(38460),S=t(92471),N=t(68356),h=t.n(N),y=t(35469);function E(){var e=c()(["\n  fragment ThreadedResponsesSidebarContent_post on Post {\n    id\n    postResponses {\n      count\n    }\n    collection {\n      id\n      viewerEdge {\n        id\n        isEditor\n      }\n    }\n    creator {\n      id\n    }\n    ...ThreadedReplies_post\n  }\n  ","\n"]);return E=function(){return e},e}var b=(0,S.Ps)(E(),y.e),x=t(76412),F=t(18733),w=t(66411),P=t(50742),_=t(97217),I=t(86742);function C(){var e=c()(["\n  fragment ThreadedResponsesSidebar_post on Post {\n    id\n    ...ThreadedResponsesSidebarContent_post\n  }\n  ","\n"]);return C=function(){return e},e}var T=h()({loading:function(){return null},loader:function(){return Promise.all([t.e(7084),t.e(3551),t.e(8121),t.e(8720),t.e(8913)]).then(t.bind(t,41469))},modules:["./ThreadedResponsesSidebarContent"],webpack:function(){return[41469]},render:(0,P.n)("ThreadedResponsesSidebarContent")}),O=function(e){var n,t,i,l,r,s,c,m,p,v=e.isResponsesSidebarVisible,S=e.inResponseToQuote,N=e.setInResponseToQuote,h=e.parentPost,y=e.continueThisThreadPost,E=e.continueThisThreadPostDepth,b=e.showPreviousSidebar,P=e.cleanupSidebar,C=e.initialSidebarRender,O=o.useState(_.sV.TOP),D=a()(O,2),R=D[0],A=D[1],L=o.useState(!1),B=a()(L,2),V=B[0],M=B[1],U=o.useRef(null),j=(0,f.t)(I.A,{variables:{postId:h.id,postResponsesPaging:{limit:d.p4},sortType:R},ssr:!1}),W=a()(j,2),H=W[0],G=W[1],z=G.called,Y=G.loading,q=G.data,Q=G.fetchMore;z||y||!v||(H(),T.preload());var $=null==q||null===(n=q.post)||void 0===n?void 0:n.responsesLocked,K=null==q||null===(t=q.post)||void 0===t?void 0:t.isLockedResponse,Z=(0,d.aj)(v,C,null==q||null===(i=q.post)||void 0===i?void 0:i.threadedPostResponses,y),X=Z.responses,J=Z.showCreateReplyEditor,ee=(null==q||null===(l=q.post)||void 0===l||null===(r=l.responseRootPost)||void 0===r||null===(s=r.post)||void 0===s?void 0:s.id)||"",ne=E||(null==q||null===(c=q.post)||void 0===c||null===(m=c.responseRootPost)||void 0===m?void 0:m.responseDepth)||0,te=void 0,ie=null==X||null===(p=X.pagingInfo)||void 0===p?void 0:p.next;return ie&&!y&&(te=function(){var e=g()(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q){e.next=5;break}return ie.__typename,n=k()(ie,["__typename"]),e.next=4,Q({variables:{postId:h.id,postResponsesPaging:n}});case 4:M(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),o.createElement(F.N8,null,o.createElement(w.cW,{source:{name:"responses",postId:h.id},extendSource:!0},o.createElement(x.I,{sidebarRef:U,cleanupSidebar:P,isResponsesSidebarVisible:v,pagingInfoNext:ie,isFetchingNextSetOfResponses:V,setIsFetching:M,fetchMoreWithArguments:te,initialSidebarRender:C},(function(e){var n=e.responseDistribution,t=e.setResponseDistribution,i=e.closeSidebar;return z||y?o.createElement(T,{responses:X,parentPost:h,responsesLocked:$,isLockedResponse:K,isLoadingInitialContent:Y,isFetchingNextSetOfResponses:V,isResponsesSidebarVisible:v,closeSidebar:i,showPreviousSidebar:b,inResponseToQuote:S,setInResponseToQuote:N,sidebarRef:U,responseDistribution:n,setResponseDistribution:t,responseSortType:R,setResponseSortType:A,rootPostId:ee,postDepth:ne,isContinueThisThread:!!y,showCreateReplyEditor:J}):null}))))},D=((0,S.Ps)(C(),b),function(e){var n=e.children,t=e.post,i=(0,o.useState)(void 0),s=a()(i,2),c=s[0],m=s[1],u=(0,o.useCallback)((function(e){return function(n){m(n),e()}}),[]);return o.createElement(r.E,null,(function(e){var i=e.showPreviousSidebar,a=e.hasLoaded,r=e.initialSidebarRender,s=e.isVisible,p=e.continueThisThreadPosts,k=e.openSidebar,v=e.cleanupSidebar;return o.createElement(l.Q.Provider,{value:{openSidebarToRespondToHighlight:u(k)}},!!t&&a&&o.createElement(O,{isResponsesSidebarVisible:s&&0===p.length,parentPost:t,inResponseToQuote:c,setInResponseToQuote:m,showPreviousSidebar:i,cleanupSidebar:v,initialSidebarRender:!!r.current}),!!t&&a&&p.map((function(e,n,a){var l=(0,d.iI)(n);return o.createElement(O,{key:t.id,isResponsesSidebarVisible:s&&n===a.length-1,parentPost:t,inResponseToQuote:c,setInResponseToQuote:m,continueThisThreadPost:e,continueThisThreadPostDepth:l,showPreviousSidebar:i,cleanupSidebar:v,initialSidebarRender:!!r.current})})),n)}))})}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/PostPage.MainContent.14a0e21c.chunk.js.map